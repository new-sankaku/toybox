skills:
  file_read:
    enabled: true
    description: "ファイルの内容を読み取ります"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - asset_worker
      - asset_leader
      - unit_test_worker
      - integration_test_worker
      - e2e_test_worker
      - build_worker
      - code_review_worker
      - architecture_leader
      - environment_setup_worker
    restrictions:
      max_file_size: 1048576
      max_lines: 2000
      allowed_extensions:
        - .py
        - .js
        - .ts
        - .tsx
        - .jsx
        - .json
        - .yaml
        - .yml
        - .md
        - .txt
        - .html
        - .css
        - .scss
        - .lua
        - .gdscript
        - .gd
        - .tscn
        - .tres

  file_write:
    enabled: true
    description: "ファイルに内容を書き込みます"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - asset_worker
      - concept_leader
      - design_leader
      - scenario_leader
      - character_leader
      - world_leader
      - asset_leader
      - integrator_leader
      - tester_leader
      - reviewer_leader
      - architecture_leader
      - environment_setup_worker
    restrictions:
      max_file_size: 1073741824
      require_approval: false
      denied_paths:
        - /etc
        - /usr
        - /bin
        - /sbin

  file_edit:
    enabled: true
    description: "ファイルの内容を部分的に編集します（文字列置換方式）"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - asset_worker
      - concept_leader
      - design_leader
      - scenario_leader
      - character_leader
      - world_leader
      - asset_leader
      - integrator_leader
      - tester_leader
      - reviewer_leader
      - architecture_leader
      - environment_setup_worker
    restrictions:
      max_file_size: 1048576
      require_approval: false
      denied_paths:
        - /etc
        - /usr
        - /bin
        - /sbin

  file_list:
    enabled: true
    description: "ディレクトリの内容を一覧表示します"
    category: file
    allowed_agents: all
    restrictions:
      max_items: 500

  file_delete:
    enabled: true
    description: "ファイルまたはディレクトリを削除します"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - asset_worker
      - asset_leader
      - environment_setup_worker
    restrictions:
      require_approval: false
      denied_paths:
        - /etc
        - /usr
        - /bin
        - /sbin

  bash_execute:
    enabled: true
    description: "Bashコマンドを実行します"
    category: execute
    allowed_agents:
      - code_worker
      - code_leader
      - build_worker
      - unit_test_worker
      - integration_test_worker
      - e2e_test_worker
      - environment_setup_worker
    restrictions:
      timeout: 120
      sandbox_enabled: true
      allowed_commands:
        - npm
        - npx
        - yarn
        - pnpm
        - python
        - pip
        - pytest
        - node
        - git
        - ls
        - cat
        - grep
        - find
        - mkdir
        - cp
        - mv
        - godot

  python_execute:
    enabled: true
    description: "Pythonコードを実行します"
    category: execute
    allowed_agents:
      - code_worker
      - code_leader
      - unit_test_worker
      - asset_worker
    restrictions:
      timeout: 60
      sandbox_enabled: true

  project_analyze:
    enabled: true
    description: "プロジェクトの構造を解析します"
    category: project
    allowed_agents: all
    restrictions:
      max_depth: 10

  code_build:
    enabled: true
    description: "プロジェクトをビルドします"
    category: build
    allowed_agents:
      - code_worker
      - build_worker
    restrictions:
      timeout: 300

  code_test:
    enabled: true
    description: "テストを実行します"
    category: build
    allowed_agents:
      - code_worker
      - build_worker
      - unit_test_worker
      - integration_test_worker
      - e2e_test_worker
    restrictions:
      timeout: 180

  code_lint:
    enabled: true
    description: "リンターを実行します"
    category: build
    allowed_agents:
      - code_worker
      - code_review_worker
      - build_worker
    restrictions:
      timeout: 120

  image_generate:
    enabled: true
    description: "画像を生成します（ComfyUI/Stable Diffusion）"
    category: asset
    allowed_agents:
      - asset_worker
      - main_character_worker
      - npc_worker
      - geography_worker
    restrictions:
      timeout: 300
      require_provider: local-comfyui

  bgm_generate:
    enabled: true
    description: "BGMを生成します"
    category: asset
    allowed_agents:
      - asset_worker
    restrictions:
      timeout: 600
      max_duration: 120
      require_provider: local-audiocraft

  sfx_generate:
    enabled: true
    description: "効果音を生成します"
    category: asset
    allowed_agents:
      - asset_worker
    restrictions:
      timeout: 300
      max_duration: 10
      require_provider: local-audiocraft

  voice_generate:
    enabled: true
    description: "テキストから音声を生成します"
    category: asset
    allowed_agents:
      - asset_worker
      - dialog_worker
    restrictions:
      timeout: 120
      require_provider: local-coqui-tts

  code_search:
    enabled: true
    description: "コード内をテキスト検索します"
    category: file
    allowed_agents: all
    restrictions:
      max_results: 200
      max_search_file_size: 524288
      max_context_lines: 5
      max_skipped_detail: 10

  linter_setup:
    enabled: true
    description: "Linter設定ファイルを生成・適用します"
    category: environment
    allowed_agents:
      - environment_setup_worker
      - architecture_leader
    restrictions:
      timeout: 60

  build_tool_setup:
    enabled: true
    description: "ビルドツールを導入・設定します"
    category: environment
    allowed_agents:
      - environment_setup_worker
    restrictions:
      timeout: 120

  dev_server_setup:
    enabled: true
    description: "開発サーバーを構築します（ホットリロード等）"
    category: environment
    allowed_agents:
      - environment_setup_worker
    restrictions:
      timeout: 180

  ci_cd_setup:
    enabled: true
    description: "CI/CD設定ファイルを生成します（GitHub Actions等）"
    category: environment
    allowed_agents:
      - environment_setup_worker
    restrictions:
      timeout: 60

  skill_register:
    enabled: true
    description: "品質管理Serviceにスキルを動的登録します"
    category: environment
    allowed_agents:
      - environment_setup_worker
    restrictions:
      timeout: 30

  file_search:
    enabled: true
    description: "ファイル名でファイルを検索します"
    category: file
    allowed_agents: all
    restrictions:
      max_results: 200

  web_fetch:
    enabled: true
    description: "WebページやAPIからデータを取得します"
    category: file
    allowed_agents:
      - code_worker
      - research_worker
      - story_worker
      - lore_worker
      - concept_leader
      - design_leader
      - scenario_leader
      - character_leader
      - world_leader
      - code_leader
      - asset_leader
      - integrator_leader
      - tester_leader
      - reviewer_leader
      - architecture_leader
    restrictions:
      timeout: 30
      sandbox_enabled: true

  file_metadata:
    enabled: true
    description: "ファイルのメタデータ（用途説明・タグ・サイズ等）を取得・検索・設定します"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - architecture_leader
    restrictions:
      max_results: 100

  agent_memory:
    enabled: true
    description: "エージェント実行中のキー・バリューメモリを管理します"
    category: knowledge
    allowed_agents: all
    restrictions:
      max_entries: 1000

  agent_output_query:
    enabled: true
    description: "他のエージェントの出力結果を参照します（read-only）"
    category: knowledge
    allowed_agents:
      - concept_leader
      - design_leader
      - scenario_leader
      - character_leader
      - world_leader
      - code_leader
      - asset_leader
      - integrator_leader
      - tester_leader
      - reviewer_leader
      - architecture_leader
    restrictions:
      max_results: 50

  dependency_graph:
    enabled: true
    description: "プロジェクトの依存関係グラフを解析します（import文解析）"
    category: project
    allowed_agents:
      - code_worker
      - code_leader
      - code_review_worker
      - architecture_leader
    restrictions:
      max_files: 500
      timeout: 60

  git_operation:
    enabled: true
    description: "Gitリポジトリ操作を実行します（status/diff/log/blame/commit）"
    category: execute
    allowed_agents:
      - code_worker
      - code_leader
      - code_review_worker
      - build_worker
    restrictions:
      timeout: 60
      blocked_commands:
        - push
        - force-push
        - reset --hard
        - clean -f
        - checkout .

  schema_validate:
    enabled: true
    description: "JSON/YAMLデータをスキーマに対してバリデーションします"
    category: project
    allowed_agents:
      - code_worker
      - build_worker
      - architecture_leader
      - integrator_leader
    restrictions:
      max_data_size: 1048576

  asset_inspect:
    enabled: true
    description: "画像・音声アセットのメタデータを検査します"
    category: asset
    allowed_agents:
      - asset_worker
      - asset_leader
    restrictions:
      timeout: 30

  game_data_transform:
    enabled: true
    description: "ゲームデータのフォーマット変換（JSON⇔YAML、データ構造変換）"
    category: project
    allowed_agents:
      - scenario_leader
      - world_leader
      - design_leader
    restrictions:
      max_data_size: 1048576

  sprite_sheet:
    enabled: true
    description: "スプライトシートの生成・分割・情報取得を行います"
    category: asset
    allowed_agents:
      - asset_worker
    restrictions:
      timeout: 120
      max_frame_count: 256

  diff_patch:
    enabled: true
    description: "テキスト間の差分を生成、または差分を適用します"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - code_review_worker
    restrictions:
      max_text_size: 1048576

  task_progress:
    enabled: true
    description: "タスクの進捗状況を報告します"
    category: project
    allowed_agents: all
    restrictions: {}

  spawn_worker:
    enabled: true
    description: "新しいワーカーエージェントを生成して実行します（リーダー専用）"
    category: orchestration
    allowed_agents:
      - concept_leader
      - design_leader
      - scenario_leader
      - character_leader
      - world_leader
      - code_leader
      - asset_leader
      - integrator_leader
      - tester_leader
      - reviewer_leader
      - architecture_leader
    restrictions:
      max_concurrent_workers: 5
      timeout: 600

agent_skill_mapping:
  code_worker:
    - file_read
    - file_write
    - file_edit
    - file_delete
    - file_list
    - bash_execute
    - python_execute
    - project_analyze
    - code_build
    - code_test
    - code_lint
    - code_search
    - file_search
    - web_fetch
    - file_metadata
    - task_progress
    - agent_memory
    - dependency_graph
    - git_operation
    - diff_patch
    - schema_validate

  code_leader:
    - file_read
    - file_write
    - file_edit
    - file_delete
    - file_list
    - project_analyze
    - code_lint
    - code_search
    - file_search
    - web_fetch
    - file_metadata
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker
    - dependency_graph
    - git_operation
    - diff_patch

  asset_leader:
    - file_read
    - file_write
    - file_edit
    - file_delete
    - file_list
    - project_analyze
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker
    - asset_inspect

  concept_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker

  design_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker
    - game_data_transform

  scenario_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker
    - game_data_transform

  character_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker

  world_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker
    - game_data_transform

  integrator_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker
    - schema_validate

  tester_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker

  reviewer_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker

  asset_worker:
    - file_read
    - file_write
    - file_edit
    - file_delete
    - file_list
    - python_execute
    - project_analyze
    - image_generate
    - bgm_generate
    - sfx_generate
    - voice_generate
    - file_search
    - task_progress
    - agent_memory
    - asset_inspect
    - sprite_sheet

  build_worker:
    - file_read
    - file_list
    - bash_execute
    - project_analyze
    - code_build
    - code_test
    - code_lint
    - code_search
    - file_search
    - task_progress
    - agent_memory
    - git_operation
    - schema_validate

  unit_test_worker:
    - file_read
    - file_list
    - bash_execute
    - python_execute
    - project_analyze
    - code_test
    - code_search
    - file_search
    - task_progress
    - agent_memory

  integration_test_worker:
    - file_read
    - file_list
    - bash_execute
    - project_analyze
    - code_test
    - code_search
    - file_search
    - task_progress
    - agent_memory

  e2e_test_worker:
    - file_read
    - file_list
    - bash_execute
    - project_analyze
    - code_test
    - code_search
    - file_search
    - task_progress
    - agent_memory

  code_review_worker:
    - file_read
    - file_list
    - project_analyze
    - code_lint
    - code_search
    - file_search
    - task_progress
    - agent_memory
    - dependency_graph
    - git_operation
    - diff_patch

  architecture_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch
    - linter_setup
    - file_metadata
    - task_progress
    - agent_memory
    - agent_output_query
    - spawn_worker
    - dependency_graph
    - schema_validate

  environment_setup_worker:
    - file_read
    - file_write
    - file_edit
    - file_delete
    - file_list
    - bash_execute
    - project_analyze
    - code_search
    - file_search
    - linter_setup
    - build_tool_setup
    - dev_server_setup
    - ci_cd_setup
    - skill_register
    - task_progress
    - agent_memory

  research_worker:
    - file_read
    - file_list
    - project_analyze
    - web_fetch
    - code_search
    - file_search
    - task_progress
    - agent_memory

  default:
    - file_read
    - file_list
    - project_analyze
    - code_search
    - file_search
    - task_progress
    - agent_memory

mock_handlers:
  image_generate:
    handler_type: image
    output_format: png
    output_dir: assets/images
  bgm_generate:
    handler_type: audio
    audio_type: bgm
    output_format: wav
    output_dir: assets/audio
  sfx_generate:
    handler_type: audio
    audio_type: sfx
    output_format: wav
    output_dir: assets/audio
  voice_generate:
    handler_type: audio
    audio_type: voice
    output_format: wav
    output_dir: assets/audio
  spawn_worker:
    handler_type: orchestration
    mock_delay: 2
  git_operation:
    handler_type: execute
    mock_output: "mock git output"
  sprite_sheet:
    handler_type: asset
    mock_output: "mock sprite sheet info"

sandbox:
  enabled: true
  output_base: "./output"
  denied_paths_linux:
    - /etc
    - /usr
    - /bin
    - /sbin
    - /var
    - /root
    - /home
    - /proc
    - /sys
    - /dev
  denied_paths_windows:
    - C:\Windows
    - C:\Program Files
    - C:\Program Files (x86)
    - C:\ProgramData
    - C:\Users
    - C:\System Volume Information
    - C:\$Recycle.Bin
  timeout_seconds: 120
  max_output_size: 100000
