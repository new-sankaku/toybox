skills:
  file_read:
    enabled: true
    description: "ファイルの内容を読み取ります"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - asset_worker
      - asset_leader
      - unit_test_worker
      - integration_test_worker
      - e2e_test_worker
      - build_worker
      - code_review_worker
      - architecture_leader
      - environment_setup_worker
    restrictions:
      max_file_size: 1048576
      max_lines: 2000
      allowed_extensions:
        - .py
        - .js
        - .ts
        - .tsx
        - .jsx
        - .json
        - .yaml
        - .yml
        - .md
        - .txt
        - .html
        - .css
        - .scss
        - .lua
        - .gdscript
        - .gd
        - .tscn
        - .tres

  file_write:
    enabled: true
    description: "ファイルに内容を書き込みます"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - asset_worker
      - concept_leader
      - design_leader
      - scenario_leader
      - character_leader
      - world_leader
      - asset_leader
      - integrator_leader
      - tester_leader
      - reviewer_leader
      - architecture_leader
      - environment_setup_worker
    restrictions:
      max_file_size: 1073741824
      require_approval: false
      denied_paths:
        - /etc
        - /usr
        - /bin
        - /sbin

  file_edit:
    enabled: true
    description: "ファイルの内容を部分的に編集します（文字列置換方式）"
    category: file
    allowed_agents:
      - code_worker
      - code_leader
      - asset_worker
      - concept_leader
      - design_leader
      - scenario_leader
      - character_leader
      - world_leader
      - asset_leader
      - integrator_leader
      - tester_leader
      - reviewer_leader
      - architecture_leader
      - environment_setup_worker
    restrictions:
      max_file_size: 1048576
      require_approval: false
      denied_paths:
        - /etc
        - /usr
        - /bin
        - /sbin

  file_list:
    enabled: true
    description: "ディレクトリの内容を一覧表示します"
    category: file
    allowed_agents: all
    restrictions:
      max_items: 500

  bash_execute:
    enabled: true
    description: "Bashコマンドを実行します"
    category: execute
    allowed_agents:
      - code_worker
      - code_leader
      - build_worker
      - unit_test_worker
      - integration_test_worker
      - e2e_test_worker
      - environment_setup_worker
    restrictions:
      timeout: 120
      sandbox_enabled: true
      allowed_commands:
        - npm
        - npx
        - yarn
        - pnpm
        - python
        - pip
        - pytest
        - node
        - git
        - ls
        - cat
        - grep
        - find
        - mkdir
        - cp
        - mv
        - godot

  python_execute:
    enabled: true
    description: "Pythonコードを実行します"
    category: execute
    allowed_agents:
      - code_worker
      - code_leader
      - unit_test_worker
      - asset_worker
    restrictions:
      timeout: 60
      sandbox_enabled: true

  project_analyze:
    enabled: true
    description: "プロジェクトの構造を解析します"
    category: project
    allowed_agents: all
    restrictions:
      max_depth: 10

  code_build:
    enabled: true
    description: "プロジェクトをビルドします"
    category: build
    allowed_agents:
      - code_worker
      - build_worker
    restrictions:
      timeout: 300

  code_test:
    enabled: true
    description: "テストを実行します"
    category: build
    allowed_agents:
      - code_worker
      - build_worker
      - unit_test_worker
      - integration_test_worker
      - e2e_test_worker
    restrictions:
      timeout: 180

  code_lint:
    enabled: true
    description: "リンターを実行します"
    category: build
    allowed_agents:
      - code_worker
      - code_review_worker
      - build_worker
    restrictions:
      timeout: 120

  image_generate:
    enabled: true
    description: "画像を生成します（ComfyUI/Stable Diffusion）"
    category: asset
    allowed_agents:
      - asset_worker
      - main_character_worker
      - npc_worker
      - geography_worker
    restrictions:
      timeout: 300
      require_provider: local-comfyui

  bgm_generate:
    enabled: true
    description: "BGMを生成します"
    category: asset
    allowed_agents:
      - asset_worker
    restrictions:
      timeout: 600
      max_duration: 120
      require_provider: local-audiocraft

  sfx_generate:
    enabled: true
    description: "効果音を生成します"
    category: asset
    allowed_agents:
      - asset_worker
    restrictions:
      timeout: 300
      max_duration: 10
      require_provider: local-audiocraft

  voice_generate:
    enabled: true
    description: "テキストから音声を生成します"
    category: asset
    allowed_agents:
      - asset_worker
      - dialog_worker
    restrictions:
      timeout: 120
      require_provider: local-coqui-tts

  code_search:
    enabled: true
    description: "コード内をテキスト検索します"
    category: file
    allowed_agents: all
    restrictions:
      max_results: 200
      max_search_file_size: 524288
      max_context_lines: 5
      max_skipped_detail: 10

  linter_setup:
    enabled: true
    description: "Linter設定ファイルを生成・適用します"
    category: environment
    allowed_agents:
      - environment_setup_worker
      - architecture_leader
    restrictions:
      timeout: 60

  build_tool_setup:
    enabled: true
    description: "ビルドツールを導入・設定します"
    category: environment
    allowed_agents:
      - environment_setup_worker
    restrictions:
      timeout: 120

  dev_server_setup:
    enabled: true
    description: "開発サーバーを構築します（ホットリロード等）"
    category: environment
    allowed_agents:
      - environment_setup_worker
    restrictions:
      timeout: 180

  ci_cd_setup:
    enabled: true
    description: "CI/CD設定ファイルを生成します（GitHub Actions等）"
    category: environment
    allowed_agents:
      - environment_setup_worker
    restrictions:
      timeout: 60

  skill_register:
    enabled: true
    description: "品質管理Serviceにスキルを動的登録します"
    category: environment
    allowed_agents:
      - environment_setup_worker
    restrictions:
      timeout: 30

  file_search:
    enabled: true
    description: "ファイル名でファイルを検索します"
    category: file
    allowed_agents: all
    restrictions:
      max_results: 200

  web_fetch:
    enabled: true
    description: "WebページやAPIからデータを取得します"
    category: file
    allowed_agents:
      - code_worker
      - research_worker
      - story_worker
      - lore_worker
      - concept_leader
      - design_leader
      - scenario_leader
      - character_leader
      - world_leader
      - code_leader
      - asset_leader
      - integrator_leader
      - tester_leader
      - reviewer_leader
      - architecture_leader
    restrictions:
      timeout: 30
      sandbox_enabled: true

agent_skill_mapping:
  code_worker:
    - file_read
    - file_write
    - file_edit
    - file_list
    - bash_execute
    - python_execute
    - project_analyze
    - code_build
    - code_test
    - code_lint
    - code_search
    - file_search
    - web_fetch

  code_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_lint
    - code_search
    - file_search
    - web_fetch

  asset_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - file_search
    - web_fetch

  concept_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch

  design_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch

  scenario_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - file_search
    - web_fetch

  character_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - file_search
    - web_fetch

  world_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - file_search
    - web_fetch

  integrator_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch

  tester_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch

  reviewer_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch

  asset_worker:
    - file_read
    - file_write
    - file_edit
    - file_list
    - python_execute
    - project_analyze
    - image_generate
    - bgm_generate
    - sfx_generate
    - voice_generate
    - file_search

  build_worker:
    - file_read
    - file_list
    - bash_execute
    - project_analyze
    - code_build
    - code_test
    - code_lint
    - code_search
    - file_search

  unit_test_worker:
    - file_read
    - file_list
    - bash_execute
    - python_execute
    - project_analyze
    - code_test
    - code_search
    - file_search

  integration_test_worker:
    - file_read
    - file_list
    - bash_execute
    - project_analyze
    - code_test
    - code_search
    - file_search

  e2e_test_worker:
    - file_read
    - file_list
    - bash_execute
    - project_analyze
    - code_test
    - code_search
    - file_search

  code_review_worker:
    - file_read
    - file_list
    - project_analyze
    - code_lint
    - code_search
    - file_search

  architecture_leader:
    - file_read
    - file_write
    - file_edit
    - file_list
    - project_analyze
    - code_search
    - file_search
    - web_fetch
    - linter_setup

  environment_setup_worker:
    - file_read
    - file_write
    - file_edit
    - file_list
    - bash_execute
    - project_analyze
    - code_search
    - file_search
    - linter_setup
    - build_tool_setup
    - dev_server_setup
    - ci_cd_setup
    - skill_register

  research_worker:
    - file_read
    - file_list
    - project_analyze
    - web_fetch
    - code_search
    - file_search

  default:
    - file_read
    - file_list
    - project_analyze
    - code_search
    - file_search

mock_handlers:
  image_generate:
    handler_type: image
    output_format: png
    output_dir: assets/images
  bgm_generate:
    handler_type: audio
    audio_type: bgm
    output_format: wav
    output_dir: assets/audio
  sfx_generate:
    handler_type: audio
    audio_type: sfx
    output_format: wav
    output_dir: assets/audio
  voice_generate:
    handler_type: audio
    audio_type: voice
    output_format: wav
    output_dir: assets/audio

sandbox:
  enabled: true
  output_base: "./output"
  denied_paths_linux:
    - /etc
    - /usr
    - /bin
    - /sbin
    - /var
    - /root
    - /home
    - /proc
    - /sys
    - /dev
  denied_paths_windows:
    - C:\Windows
    - C:\Program Files
    - C:\Program Files (x86)
    - C:\ProgramData
    - C:\Users
    - C:\System Volume Information
    - C:\$Recycle.Bin
  timeout_seconds: 120
  max_output_size: 100000
