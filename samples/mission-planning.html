<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mission Planning - Project Creation</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-main: #E8E4D4;
      --bg-panel: #DAD5C3;
      --bg-selected: #CCC7B5;
      --bg-header: #57534A;
      --text-main: #454138;
      --text-light: #5A5548;
      --text-header: #E8E4D4;
      --accent-green: #7AAA7A;
      --accent-orange: #C4956C;
      --accent-blue: #6B8FAA;
      --border-light: rgba(69, 65, 56, 0.2);
      --border-dark: rgba(69, 65, 56, 0.4);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Noto Sans JP', sans-serif;
      background: var(--bg-main);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      width: 100%;
      max-width: 800px;
      background: var(--bg-panel);
      border: 1px solid var(--border-dark);
    }

    .header {
      background: var(--bg-header);
      color: var(--text-header);
      padding: 16px 24px;
      display: flex;
      align-items: center;
      gap: 8px;
      letter-spacing: 0.15em;
    }

    .diamond {
      opacity: 0.7;
    }

    .progress-bar {
      display: flex;
      padding: 16px 24px;
      gap: 8px;
      border-bottom: 1px solid var(--border-light);
      background: var(--bg-main);
    }

    .phase-indicator {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      opacity: 0.4;
      transition: all 0.3s ease;
    }

    .phase-indicator.active {
      opacity: 1;
    }

    .phase-indicator.completed {
      opacity: 1;
    }

    .phase-dot {
      width: 24px;
      height: 24px;
      border: 2px solid var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      transition: all 0.3s ease;
    }

    .phase-indicator.completed .phase-dot {
      background: var(--accent-green);
      border-color: var(--accent-green);
      color: white;
    }

    .phase-indicator.active .phase-dot {
      border-color: var(--accent-orange);
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(196, 149, 108, 0.4); }
      50% { box-shadow: 0 0 0 8px rgba(196, 149, 108, 0); }
    }

    .phase-label {
      font-size: 10px;
      letter-spacing: 0.1em;
      text-align: center;
    }

    .phase-line {
      flex: 0.5;
      display: flex;
      align-items: center;
      padding-top: 4px;
    }

    .phase-line-inner {
      height: 2px;
      width: 100%;
      background: var(--border-dark);
      position: relative;
    }

    .phase-line-inner.filled {
      background: var(--accent-green);
    }

    .content {
      padding: 32px 24px;
      min-height: 300px;
    }

    .phase-title {
      font-size: 14px;
      letter-spacing: 0.15em;
      margin-bottom: 8px;
      color: var(--text-light);
    }

    .phase-main-title {
      font-size: 20px;
      letter-spacing: 0.1em;
      margin-bottom: 24px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border-light);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 12px;
      letter-spacing: 0.1em;
      color: var(--text-light);
      margin-bottom: 8px;
    }

    .form-input {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg-main);
      border: 1px solid var(--border-dark);
      color: var(--text-main);
      font-family: inherit;
      font-size: 14px;
      letter-spacing: 0.05em;
      outline: none;
      transition: border-color 0.2s;
    }

    .form-input:focus {
      border-color: var(--text-main);
    }

    .form-input::placeholder {
      color: var(--text-light);
      opacity: 0.6;
    }

    textarea.form-input {
      resize: none;
      min-height: 120px;
    }

    .options-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .option-card {
      padding: 16px;
      background: var(--bg-main);
      border: 1px solid var(--border-light);
      cursor: pointer;
      transition: all 0.2s;
    }

    .option-card:hover {
      border-color: var(--border-dark);
    }

    .option-card.selected {
      border-color: var(--accent-green);
      background: var(--bg-selected);
    }

    .option-title {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 4px;
    }

    .option-desc {
      font-size: 11px;
      color: var(--text-light);
    }

    .footer {
      padding: 16px 24px;
      border-top: 1px solid var(--border-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .confirmed-text {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      letter-spacing: 0.1em;
      color: var(--accent-green);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .confirmed-text.show {
      opacity: 1;
    }

    .btn {
      padding: 12px 32px;
      background: var(--bg-header);
      color: var(--text-header);
      border: none;
      font-family: inherit;
      font-size: 13px;
      letter-spacing: 0.15em;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn:hover {
      background: var(--text-main);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: var(--bg-panel);
      color: var(--text-main);
      border: 1px solid var(--border-dark);
    }

    .btn-secondary:hover {
      background: var(--bg-selected);
    }

    .summary {
      background: var(--bg-main);
      padding: 20px;
      border: 1px solid var(--border-light);
    }

    .summary-row {
      display: flex;
      padding: 8px 0;
      border-bottom: 1px solid var(--border-light);
    }

    .summary-row:last-child {
      border-bottom: none;
    }

    .summary-label {
      width: 120px;
      font-size: 11px;
      color: var(--text-light);
      letter-spacing: 0.1em;
    }

    .summary-value {
      flex: 1;
      font-size: 13px;
    }

    .launch-sequence {
      text-align: center;
      padding: 40px;
      display: none;
    }

    .launch-sequence.show {
      display: block;
    }

    .launch-text {
      font-size: 24px;
      letter-spacing: 0.2em;
      margin-bottom: 24px;
      animation: blink 0.5s ease-in-out infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .launch-progress {
      height: 8px;
      background: var(--border-light);
      margin-bottom: 16px;
      overflow: hidden;
    }

    .launch-progress-fill {
      height: 100%;
      background: var(--accent-green);
      width: 0%;
      transition: width 0.1s linear;
    }

    .launch-status {
      font-size: 12px;
      color: var(--text-light);
      letter-spacing: 0.1em;
    }

    .hidden {
      display: none;
    }

    .flash {
      animation: flash 0.3s ease-out;
    }

    @keyframes flash {
      0% { background: white; }
      100% { background: var(--bg-panel); }
    }
  </style>
</head>
<body>
  <div class="container" id="container">
    <div class="header">
      <span class="diamond">◇</span>
      <span>MISSION PLANNING</span>
    </div>

    <div class="progress-bar">
      <div class="phase-indicator active" data-phase="1">
        <div class="phase-dot">1</div>
        <div class="phase-label">NAME</div>
      </div>
      <div class="phase-line"><div class="phase-line-inner"></div></div>
      <div class="phase-indicator" data-phase="2">
        <div class="phase-dot">2</div>
        <div class="phase-label">CONCEPT</div>
      </div>
      <div class="phase-line"><div class="phase-line-inner"></div></div>
      <div class="phase-indicator" data-phase="3">
        <div class="phase-dot">3</div>
        <div class="phase-label">PARAMETERS</div>
      </div>
      <div class="phase-line"><div class="phase-line-inner"></div></div>
      <div class="phase-indicator" data-phase="4">
        <div class="phase-dot">4</div>
        <div class="phase-label">CONFIRM</div>
      </div>
    </div>

    <div class="content" id="content">
      <!-- Phase 1: Name -->
      <div class="phase-content" data-phase="1">
        <div class="phase-title">PHASE 1</div>
        <div class="phase-main-title">MISSION NAME</div>
        <div class="form-group">
          <label class="form-label">作戦名を入力してください</label>
          <input type="text" class="form-input" id="projectName" placeholder="例: NebulaForge">
        </div>
      </div>

      <!-- Phase 2: Concept -->
      <div class="phase-content hidden" data-phase="2">
        <div class="phase-title">PHASE 2</div>
        <div class="phase-main-title">MISSION CONCEPT</div>
        <div class="form-group">
          <label class="form-label">作戦概要を入力してください</label>
          <textarea class="form-input" id="projectIdea" placeholder="作りたいゲームのアイデアを自由に記述してください..."></textarea>
        </div>
      </div>

      <!-- Phase 3: Parameters -->
      <div class="phase-content hidden" data-phase="3">
        <div class="phase-title">PHASE 3</div>
        <div class="phase-main-title">MISSION PARAMETERS</div>
        <div class="form-group">
          <label class="form-label">プラットフォーム</label>
          <div class="options-grid">
            <div class="option-card" data-value="web">
              <div class="option-title">Web</div>
              <div class="option-desc">ブラウザ向け</div>
            </div>
            <div class="option-card" data-value="desktop">
              <div class="option-title">Desktop</div>
              <div class="option-desc">PC向け</div>
            </div>
            <div class="option-card" data-value="mobile">
              <div class="option-title">Mobile</div>
              <div class="option-desc">スマホ向け</div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">スコープ</label>
          <div class="options-grid">
            <div class="option-card" data-value="prototype">
              <div class="option-title">Prototype</div>
              <div class="option-desc">最小限の検証</div>
            </div>
            <div class="option-card" data-value="mvp">
              <div class="option-title">MVP</div>
              <div class="option-desc">基本機能</div>
            </div>
            <div class="option-card" data-value="full">
              <div class="option-title">Full</div>
              <div class="option-desc">完全版</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Phase 4: Confirm -->
      <div class="phase-content hidden" data-phase="4">
        <div class="phase-title">PHASE 4</div>
        <div class="phase-main-title">MISSION BRIEFING</div>
        <div class="summary" id="summary">
          <div class="summary-row">
            <div class="summary-label">MISSION NAME</div>
            <div class="summary-value" id="summaryName">-</div>
          </div>
          <div class="summary-row">
            <div class="summary-label">CONCEPT</div>
            <div class="summary-value" id="summaryConcept">-</div>
          </div>
          <div class="summary-row">
            <div class="summary-label">PLATFORM</div>
            <div class="summary-value" id="summaryPlatform">-</div>
          </div>
          <div class="summary-row">
            <div class="summary-label">SCOPE</div>
            <div class="summary-value" id="summaryScope">-</div>
          </div>
        </div>
      </div>

      <!-- Launch Sequence -->
      <div class="launch-sequence" id="launchSequence">
        <div class="launch-text" id="launchText">INITIALIZING...</div>
        <div class="launch-progress">
          <div class="launch-progress-fill" id="launchProgress"></div>
        </div>
        <div class="launch-status" id="launchStatus">Loading mission parameters...</div>
      </div>
    </div>

    <div class="footer" id="footer">
      <div class="confirmed-text" id="confirmedText">
        <span class="diamond">◇</span>
        <span>CONFIRMED</span>
      </div>
      <div>
        <button class="btn btn-secondary" id="backBtn" style="display: none; margin-right: 12px;">BACK</button>
        <button class="btn" id="nextBtn">NEXT</button>
      </div>
    </div>
  </div>

  <script>
    const state = {
      currentPhase: 1,
      maxPhase: 4,
      data: {
        name: '',
        idea: '',
        platform: '',
        scope: ''
      }
    };

    const elements = {
      container: document.getElementById('container'),
      content: document.getElementById('content'),
      nextBtn: document.getElementById('nextBtn'),
      backBtn: document.getElementById('backBtn'),
      confirmedText: document.getElementById('confirmedText'),
      footer: document.getElementById('footer'),
      launchSequence: document.getElementById('launchSequence'),
      launchText: document.getElementById('launchText'),
      launchProgress: document.getElementById('launchProgress'),
      launchStatus: document.getElementById('launchStatus')
    };

    function updatePhaseIndicators() {
      document.querySelectorAll('.phase-indicator').forEach(indicator => {
        const phase = parseInt(indicator.dataset.phase);
        indicator.classList.remove('active', 'completed');
        if (phase < state.currentPhase) {
          indicator.classList.add('completed');
          indicator.querySelector('.phase-dot').textContent = '✓';
        } else if (phase === state.currentPhase) {
          indicator.classList.add('active');
        }
      });

      document.querySelectorAll('.phase-line-inner').forEach((line, index) => {
        line.classList.toggle('filled', index < state.currentPhase - 1);
      });
    }

    function showPhase(phase) {
      document.querySelectorAll('.phase-content').forEach(content => {
        content.classList.add('hidden');
      });
      const targetPhase = document.querySelector(`.phase-content[data-phase="${phase}"]`);
      if (targetPhase) {
        targetPhase.classList.remove('hidden');
      }

      elements.backBtn.style.display = phase > 1 ? 'inline-block' : 'none';
      elements.nextBtn.textContent = phase === state.maxPhase ? 'LAUNCH' : 'NEXT';

      if (phase === state.maxPhase) {
        updateSummary();
      }
    }

    function updateSummary() {
      document.getElementById('summaryName').textContent = state.data.name || '-';
      document.getElementById('summaryConcept').textContent = state.data.idea || '-';
      document.getElementById('summaryPlatform').textContent = state.data.platform.toUpperCase() || '-';
      document.getElementById('summaryScope').textContent = state.data.scope.toUpperCase() || '-';
    }

    function validatePhase(phase) {
      switch (phase) {
        case 1:
          return document.getElementById('projectName').value.trim() !== '';
        case 2:
          return document.getElementById('projectIdea').value.trim() !== '';
        case 3:
          return state.data.platform !== '' && state.data.scope !== '';
        case 4:
          return true;
        default:
          return false;
      }
    }

    function savePhaseData(phase) {
      switch (phase) {
        case 1:
          state.data.name = document.getElementById('projectName').value.trim();
          break;
        case 2:
          state.data.idea = document.getElementById('projectIdea').value.trim();
          break;
      }
    }

    function showConfirmed() {
      elements.confirmedText.classList.add('show');
      elements.container.classList.add('flash');
      setTimeout(() => {
        elements.confirmedText.classList.remove('show');
        elements.container.classList.remove('flash');
      }, 800);
    }

    function startLaunchSequence() {
      document.querySelectorAll('.phase-content').forEach(c => c.classList.add('hidden'));
      elements.launchSequence.classList.add('show');
      elements.footer.style.display = 'none';

      const steps = [
        { progress: 20, text: 'INITIALIZING...', status: 'Loading mission parameters...' },
        { progress: 40, text: 'INITIALIZING...', status: 'Configuring AI agents...' },
        { progress: 60, text: 'INITIALIZING...', status: 'Preparing workspace...' },
        { progress: 80, text: 'INITIALIZING...', status: 'Finalizing setup...' },
        { progress: 100, text: 'MISSION READY', status: 'All systems operational' }
      ];

      let stepIndex = 0;
      const interval = setInterval(() => {
        if (stepIndex < steps.length) {
          const step = steps[stepIndex];
          elements.launchProgress.style.width = step.progress + '%';
          elements.launchText.textContent = step.text;
          elements.launchStatus.textContent = step.status;
          stepIndex++;
        } else {
          clearInterval(interval);
          setTimeout(() => {
            elements.container.style.transition = 'all 0.5s ease';
            elements.container.style.background = 'white';
            setTimeout(() => {
              alert('プロジェクトが作成されました！\n（実際の実装ではダッシュボードに遷移します）');
              location.reload();
            }, 500);
          }, 1000);
        }
      }, 600);
    }

    elements.nextBtn.addEventListener('click', () => {
      if (!validatePhase(state.currentPhase)) {
        alert('入力を完了してください');
        return;
      }

      savePhaseData(state.currentPhase);

      if (state.currentPhase === state.maxPhase) {
        startLaunchSequence();
        return;
      }

      showConfirmed();
      setTimeout(() => {
        state.currentPhase++;
        updatePhaseIndicators();
        showPhase(state.currentPhase);
      }, 400);
    });

    elements.backBtn.addEventListener('click', () => {
      if (state.currentPhase > 1) {
        state.currentPhase--;
        updatePhaseIndicators();
        showPhase(state.currentPhase);
      }
    });

    document.querySelectorAll('.option-card').forEach(card => {
      card.addEventListener('click', () => {
        const parent = card.closest('.form-group');
        parent.querySelectorAll('.option-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');

        const label = parent.querySelector('.form-label').textContent;
        if (label.includes('プラットフォーム')) {
          state.data.platform = card.dataset.value;
        } else if (label.includes('スコープ')) {
          state.data.scope = card.dataset.value;
        }
      });
    });

    updatePhaseIndicators();
    showPhase(1);
  </script>
</body>
</html>
