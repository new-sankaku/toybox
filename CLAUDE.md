# CLAUDE.md

・AIサービスはサーバー側設定ファイルとして持たせる。
・同じ設定を複数の設定ファイルに分割せず一つにする。
・画面側にAIサービスはハードコーディングしない。
・安易な解決策を採用するな。
・代替案は提示して許可をとれ。
・実装はアルゴリズムの選定を行え。
・ベストプラクティスを採用しろ。
・意味のない質問はするな。質問が必要なら意図を明確にして何故その質問をしたか書け。
・固定値は避けてフレキシブルなUIにする。
・AIサービスは固定でWeb上に表示しない。AIサービスはプロジェクトによって使う使わないがあるので、使わないものは表示しない。
・Web画面でのフォールバック処理はユーザーを誤認させるため行わない。誤認の心配がない場合は可能。
・サーバーからデータが取得できないためフォールバックなどは禁止。
・常に敬語を使う。
・コメントはTODO以外は不要
・Sonnet Haikuをサブエージェントとすることは禁止、サブエージェントは基本的にOpusを使用する。

- **Agent**: AIエージェント（concept_leader, design_workerなど）。独立した実行単位。1つのAgentは特定の役割を持つ。
- **Task**: Agentが実行する個別の作業単位。1つのAgentが複数のTaskを実行することがある。AgentとTaskは別物であり、混同しないこと。
- **nulファイルの作成禁止** - Windowsで出力を破棄する場合、`> nul` を使用しない（`nul`という名前のファイルが作成されてしまう）。代わりに `> /dev/null 2>&1` を使用するか、出力リダイレクトを使わない。
- **応急処置の禁止** - インラインスタイル（`style={{ }}`）でのべた書きは禁止。必ずTailwindクラスまたはCSSファイルを使用すること。
- **推測での修正禁止** - 「たぶんこれだろう」で修正を始めない。必ず問題の要素を特定してから修正すること。
- **同じ調査の繰り返し禁止** - 同じ問題が再度発生した場合、前回と同じ視点で調査しない。別の観点（親要素、子要素、関連コンポーネント、CSS継承、Tailwind設定など）から調べ直すこと。
- **誤認させるデフォルト値禁止** - API取得失敗時などに、実際とは異なる値をデフォルト値として画面に表示しない。取得失敗時は「-」や空欄、または「取得失敗」等の明示的な表示にすること。ユーザーを誤認させる情報を表示してはならない。
- **文言の統一** - 画面に表示する文言（ラベル、ボタン、メッセージ等）は他の画面と統一的な表現にすること。新しい文言を追加する前に、既存の画面で使われている表現を確認して合わせる。


## コード圧縮

トークン削減のためコードを圧縮する:
```bash
# TypeScript（langgraph-studio）
cd langgraph-studio
npm run lint:fix    # ESLint適用（インデント1スペース等）
npm run format      # 演算子スペース削除

# Python（backend）
cd backend
python scripts/remove-spaces.py
```

**圧縮ルール（共通）:**
- コロン/カンマ後: スペースなし
- アロー演算子前後: スペースなし
- コメント: 削除（TODO/FIXME以外）
- 文字列内: 保持

**TypeScript追加ルール:**
- インデント: 1スペース
