<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>アンテナ型ロボット</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#d8d0c8;display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:sans-serif;}
.container{background:#fff;border-radius:20px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.08);}
h2{text-align:center;color:#8b8178;margin-bottom:15px;font-weight:normal;font-size:18px;}
#canvas{display:block;border-radius:12px;}
</style>
</head>
<body>
<div class="container">
<h2>アンテナ型ロボット</h2>
<canvas id="canvas" width="400" height="400"></canvas>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
var scene,camera,renderer,robot,time=0;
function init(){
scene=new THREE.Scene();
scene.background=new THREE.Color(0xd8d0c8);
camera=new THREE.PerspectiveCamera(50,1,0.1,1000);
camera.position.set(0,2.5,5);
camera.lookAt(0,1.5,0);
renderer=new THREE.WebGLRenderer({canvas:document.getElementById('canvas'),antialias:true});
renderer.setSize(400,400);
renderer.shadowMap.enabled=true;
renderer.shadowMap.type=THREE.PCFSoftShadowMap;
var ambLight=new THREE.AmbientLight(0xffffff,0.6);
scene.add(ambLight);
var dirLight=new THREE.DirectionalLight(0xffffff,0.8);
dirLight.position.set(5,10,5);
dirLight.castShadow=true;
dirLight.shadow.mapSize.width=1024;
dirLight.shadow.mapSize.height=1024;
scene.add(dirLight);
createRobot();
createFloor();
animate();
}
function createRobot(){
robot=new THREE.Group();
var bodyColor=0xb8aea4;
var accentColor=0x8a817a;
var eyeColor=0x4a443e;
var cheekColor=0xc9a99c;
var darkColor=0x6a635c;
var glowColor=0xd4ccc4;

// ベース（台座）
var baseGeo=new THREE.CylinderGeometry(0.5,0.6,0.3,32);
var baseMat=new THREE.MeshToonMaterial({color:darkColor});
var base=new THREE.Mesh(baseGeo,baseMat);
base.position.y=0.15;
base.castShadow=true;
robot.add(base);

// メインボディ（小さな筐体）
var bodyGeo=new THREE.BoxGeometry(0.6,0.5,0.6);
var bodyMat=new THREE.MeshToonMaterial({color:bodyColor});
var body=new THREE.Mesh(bodyGeo,bodyMat);
body.position.y=0.55;
body.castShadow=true;
robot.add(body);
robot.body=body;

// 顔パネル
var faceGeo=new THREE.BoxGeometry(0.5,0.35,0.05);
var faceMat=new THREE.MeshToonMaterial({color:accentColor});
var face=new THREE.Mesh(faceGeo,faceMat);
face.position.set(0,0.55,0.33);
robot.add(face);

// 目
var eyeGeo=new THREE.SphereGeometry(0.08,12,12);
var eyeMat=new THREE.MeshToonMaterial({color:eyeColor});
var leftEye=new THREE.Mesh(eyeGeo,eyeMat);
leftEye.position.set(-0.12,0.6,0.36);
robot.add(leftEye);
var rightEye=new THREE.Mesh(eyeGeo,eyeMat);
rightEye.position.set(0.12,0.6,0.36);
robot.add(rightEye);

// 瞳
var pupilGeo=new THREE.SphereGeometry(0.035,8,8);
var pupilMat=new THREE.MeshToonMaterial({color:0x2a2520});
var leftPupil=new THREE.Mesh(pupilGeo,pupilMat);
leftPupil.position.set(-0.12,0.6,0.44);
robot.add(leftPupil);
var rightPupil=new THREE.Mesh(pupilGeo,pupilMat);
rightPupil.position.set(0.12,0.6,0.44);
robot.add(rightPupil);

// 頬
var cheekGeo=new THREE.SphereGeometry(0.05,10,10);
var cheekMat=new THREE.MeshToonMaterial({color:cheekColor});
var leftCheek=new THREE.Mesh(cheekGeo,cheekMat);
leftCheek.position.set(-0.22,0.48,0.35);
leftCheek.scale.set(1,0.6,0.5);
robot.add(leftCheek);
var rightCheek=new THREE.Mesh(cheekGeo,cheekMat);
rightCheek.position.set(0.22,0.48,0.35);
rightCheek.scale.set(1,0.6,0.5);
robot.add(rightCheek);

// メインアンテナ支柱
var poleGeo=new THREE.CylinderGeometry(0.06,0.08,1.5,16);
var poleMat=new THREE.MeshToonMaterial({color:accentColor});
var pole=new THREE.Mesh(poleGeo,poleMat);
pole.position.set(0,1.55,0);
robot.add(pole);

// アンテナディッシュ
var dishGroup=new THREE.Group();
var dishGeo=new THREE.SphereGeometry(0.4,32,16,0,Math.PI*2,0,Math.PI/2);
var dishMat=new THREE.MeshToonMaterial({color:bodyColor,side:THREE.DoubleSide});
var dish=new THREE.Mesh(dishGeo,dishMat);
dish.rotation.x=Math.PI;
dishGroup.add(dish);

// ディッシュ中央
var dishCenterGeo=new THREE.CylinderGeometry(0.08,0.08,0.15,16);
var dishCenter=new THREE.Mesh(dishCenterGeo,new THREE.MeshToonMaterial({color:accentColor}));
dishCenter.position.y=-0.1;
dishGroup.add(dishCenter);

// ディッシュ先端
var dishTipGeo=new THREE.SphereGeometry(0.1,12,12);
var dishTipMat=new THREE.MeshToonMaterial({color:cheekColor,transparent:true,opacity:0.9});
var dishTip=new THREE.Mesh(dishTipGeo,dishTipMat);
dishTip.position.y=-0.22;
dishGroup.add(dishTip);
robot.dishTip=dishTip;

dishGroup.position.set(0,2.5,0);
dishGroup.rotation.x=-0.3;
robot.add(dishGroup);
robot.dish=dishGroup;

// サブアンテナ（3本）
var subAntennaPositions=[
{x:-0.2,rot:0.3},
{x:0.2,rot:-0.3},
{x:0,rot:0}
];
robot.subAntennaTips=[];
subAntennaPositions.forEach(function(pos,i){
var subPole=new THREE.Mesh(new THREE.CylinderGeometry(0.02,0.02,0.6+i*0.1,8),poleMat);
subPole.position.set(pos.x,1.1+i*0.05,0);
subPole.rotation.z=pos.rot;
robot.add(subPole);

var subTip=new THREE.Mesh(new THREE.SphereGeometry(0.04,8,8),new THREE.MeshToonMaterial({color:cheekColor,transparent:true,opacity:0.8}));
var tipY=1.4+i*0.1+Math.sin(pos.rot)*0.3;
var tipX=pos.x+Math.sin(pos.rot)*0.3;
subTip.position.set(tipX,tipY,0);
robot.add(subTip);
robot.subAntennaTips.push(subTip);
});

// 電波エフェクト（リング）
robot.waveRings=[];
var waveRingGeo=new THREE.TorusGeometry(0.3,0.02,8,32);
var waveRingMat=new THREE.MeshToonMaterial({color:glowColor,transparent:true,opacity:0.5});
for(var i=0;i<3;i++){
var waveRing=new THREE.Mesh(waveRingGeo,waveRingMat.clone());
waveRing.position.set(0,2.3,-0.2);
waveRing.rotation.x=-0.3;
robot.add(waveRing);
robot.waveRings.push(waveRing);
}

// 小さな脚（4本）
var legMat=new THREE.MeshToonMaterial({color:darkColor});
var legPositions=[{x:-0.3,z:0.3},{x:0.3,z:0.3},{x:-0.3,z:-0.3},{x:0.3,z:-0.3}];
legPositions.forEach(function(pos){
var leg=new THREE.Mesh(new THREE.CylinderGeometry(0.05,0.06,0.15,10),legMat);
leg.position.set(pos.x,0.075,pos.z);
robot.add(leg);
});

// インジケーターライト
var indicatorGeo=new THREE.SphereGeometry(0.04,8,8);
robot.indicators=[];
[-0.15,0,0.15].forEach(function(x,i){
var indicator=new THREE.Mesh(indicatorGeo,new THREE.MeshToonMaterial({color:cheekColor,transparent:true,opacity:0.8}));
indicator.position.set(x,0.4,0.32);
robot.add(indicator);
robot.indicators.push(indicator);
});

scene.add(robot);
}
function createFloor(){
var floorGeo=new THREE.CircleGeometry(2,32);
var floorMat=new THREE.MeshToonMaterial({color:0xcac4bc});
var floor=new THREE.Mesh(floorGeo,floorMat);
floor.rotation.x=-Math.PI/2;
floor.position.y=0;
floor.receiveShadow=true;
scene.add(floor);
}
function animate(){
requestAnimationFrame(animate);
time+=0.03;
// ディッシュの回転
robot.dish.rotation.y+=0.02;
robot.dish.rotation.x=-0.3+Math.sin(time*0.8)*0.1;
// ディッシュ先端の発光
var brightness=0.6+Math.sin(time*4)*0.3;
robot.dishTip.material.opacity=brightness;
// サブアンテナの点滅
robot.subAntennaTips.forEach(function(tip,i){
tip.material.opacity=0.5+Math.sin(time*5+i*Math.PI/3)*0.4;
});
// 電波エフェクト
robot.waveRings.forEach(function(ring,i){
var scale=1+((time*0.5+i*0.3)%1)*2;
ring.scale.set(scale,scale,scale);
ring.material.opacity=0.5-((time*0.5+i*0.3)%1)*0.5;
});
// インジケーターの点滅
robot.indicators.forEach(function(ind,i){
ind.material.opacity=0.5+Math.sin(time*3+i*Math.PI/2)*0.4;
});
// 全体の微動
robot.body.position.y=0.55+Math.sin(time*2)*0.01;
// 全体の回転
robot.rotation.y=Math.sin(time*0.5)*0.2;
renderer.render(scene,camera);
}
init();
</script>
</body>
</html>
