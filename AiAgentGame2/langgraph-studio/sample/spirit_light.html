<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>光の精霊</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#d8d0c8;display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:sans-serif;}
.container{background:#fff;border-radius:20px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.08);}
h2{text-align:center;color:#8b8178;margin-bottom:15px;font-weight:normal;font-size:18px;}
#canvas{display:block;border-radius:12px;}
</style>
</head>
<body>
<div class="container">
<h2>光の精霊</h2>
<canvas id="canvas" width="400" height="400"></canvas>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
var scene,camera,renderer,character,time=0;
function init(){
scene=new THREE.Scene();
scene.background=new THREE.Color(0xd8d0c8);
camera=new THREE.PerspectiveCamera(50,1,0.1,1000);
camera.position.set(0,2,5);
camera.lookAt(0,1.2,0);
renderer=new THREE.WebGLRenderer({canvas:document.getElementById('canvas'),antialias:true});
renderer.setSize(400,400);
renderer.shadowMap.enabled=true;
renderer.shadowMap.type=THREE.PCFSoftShadowMap;
var ambLight=new THREE.AmbientLight(0xffffff,0.6);
scene.add(ambLight);
var dirLight=new THREE.DirectionalLight(0xffffff,0.8);
dirLight.position.set(5,10,5);
dirLight.castShadow=true;
scene.add(dirLight);
createCharacter();
createFloor();
animate();
}
function createCharacter(){
character=new THREE.Group();
var coreColor=0xf8f0e0;
var glowColor=0xf0e8d0;
var rayColor=0xe8dcc0;
var eyeColor=0x806850;
var cheekColor=0xf0d0b0;

// 中心のコア（明るい球体）
var coreGeo=new THREE.SphereGeometry(0.4,32,32);
var coreMat=new THREE.MeshToonMaterial({color:coreColor,transparent:true,opacity:0.9});
var core=new THREE.Mesh(coreGeo,coreMat);
core.position.y=1.3;
character.add(core);
character.core=core;

// 内側の光
var innerGeo=new THREE.SphereGeometry(0.25,24,24);
var innerMat=new THREE.MeshToonMaterial({color:0xfffef8,transparent:true,opacity:0.85});
var inner=new THREE.Mesh(innerGeo,innerMat);
inner.position.y=1.3;
character.add(inner);
character.inner=inner;

// 外側のグロー
var glowGeo=new THREE.SphereGeometry(0.55,32,32);
var glowMat=new THREE.MeshToonMaterial({color:glowColor,transparent:true,opacity:0.3});
var glow=new THREE.Mesh(glowGeo,glowMat);
glow.position.y=1.3;
character.add(glow);
character.glow=glow;

// 目
var eyeGeo=new THREE.SphereGeometry(0.08,16,16);
var eyeMat=new THREE.MeshToonMaterial({color:eyeColor});
var leftEye=new THREE.Mesh(eyeGeo,eyeMat);
leftEye.position.set(-0.12,1.38,0.35);
character.add(leftEye);
var rightEye=new THREE.Mesh(eyeGeo,eyeMat);
rightEye.position.set(0.12,1.38,0.35);
character.add(rightEye);

// 瞳ハイライト
var highlightGeo=new THREE.SphereGeometry(0.025,8,8);
var highlightMat=new THREE.MeshToonMaterial({color:0xffffff});
var leftHighlight=new THREE.Mesh(highlightGeo,highlightMat);
leftHighlight.position.set(-0.1,1.4,0.42);
character.add(leftHighlight);
var rightHighlight=new THREE.Mesh(highlightGeo,highlightMat);
rightHighlight.position.set(0.14,1.4,0.42);
character.add(rightHighlight);

// 頬
var cheekGeo=new THREE.SphereGeometry(0.06,12,12);
var cheekMat=new THREE.MeshToonMaterial({color:cheekColor,transparent:true,opacity:0.8});
var leftCheek=new THREE.Mesh(cheekGeo,cheekMat);
leftCheek.position.set(-0.25,1.25,0.3);
leftCheek.scale.set(1,0.6,0.5);
character.add(leftCheek);
var rightCheek=new THREE.Mesh(cheekGeo,cheekMat);
rightCheek.position.set(0.25,1.25,0.3);
rightCheek.scale.set(1,0.6,0.5);
character.add(rightCheek);

// 光の翼（左）
var leftWingGroup=new THREE.Group();
character.leftWingFeathers=[];
for(var i=0;i<5;i++){
var feather=new THREE.Mesh(
new THREE.ConeGeometry(0.06,0.4+i*0.08,6),
new THREE.MeshToonMaterial({color:rayColor,transparent:true,opacity:0.7-i*0.08})
);
feather.position.set(-0.15-i*0.1,0,0);
feather.rotation.z=0.8+i*0.15;
leftWingGroup.add(feather);
character.leftWingFeathers.push(feather);
}
leftWingGroup.position.set(-0.4,1.4,0);
character.add(leftWingGroup);
character.leftWing=leftWingGroup;

// 光の翼（右）
var rightWingGroup=new THREE.Group();
character.rightWingFeathers=[];
for(var i=0;i<5;i++){
var feather=new THREE.Mesh(
new THREE.ConeGeometry(0.06,0.4+i*0.08,6),
new THREE.MeshToonMaterial({color:rayColor,transparent:true,opacity:0.7-i*0.08})
);
feather.position.set(0.15+i*0.1,0,0);
feather.rotation.z=-0.8-i*0.15;
rightWingGroup.add(feather);
character.rightWingFeathers.push(feather);
}
rightWingGroup.position.set(0.4,1.4,0);
character.add(rightWingGroup);
character.rightWing=rightWingGroup;

// 光の輪（頭上のハロー）
var haloGeo=new THREE.TorusGeometry(0.25,0.025,8,32);
var haloMat=new THREE.MeshToonMaterial({color:coreColor,transparent:true,opacity:0.8});
var halo=new THREE.Mesh(haloGeo,haloMat);
halo.position.y=2;
halo.rotation.x=Math.PI/2;
character.add(halo);
character.halo=halo;

// 光線
character.rays=[];
for(var i=0;i<8;i++){
var angle=i*Math.PI/4;
var ray=new THREE.Mesh(
new THREE.CylinderGeometry(0.015,0.03,0.6,6),
new THREE.MeshToonMaterial({color:rayColor,transparent:true,opacity:0.5})
);
ray.position.set(Math.sin(angle)*0.5,1.3,Math.cos(angle)*0.5);
ray.rotation.z=Math.sin(angle)*0.5;
ray.rotation.x=Math.cos(angle)*0.5;
character.add(ray);
character.rays.push({mesh:ray,angle:angle});
}

// 光の粒子
character.particles=[];
for(var i=0;i<20;i++){
var particle=new THREE.Mesh(
new THREE.SphereGeometry(0.025,8,8),
new THREE.MeshToonMaterial({color:coreColor,transparent:true,opacity:0.6})
);
var angle=Math.random()*Math.PI*2;
var radius=0.3+Math.random()*0.5;
particle.position.set(
Math.sin(angle)*radius,
0.8+Math.random()*1,
Math.cos(angle)*radius
);
character.add(particle);
character.particles.push({
mesh:particle,
angle:angle,
radius:radius,
speed:0.5+Math.random()*0.5,
baseY:particle.position.y
});
}

// 星形の光
character.stars=[];
for(var i=0;i<6;i++){
var angle=i*Math.PI/3;
var star=new THREE.Mesh(
new THREE.OctahedronGeometry(0.06,0),
new THREE.MeshToonMaterial({color:glowColor,transparent:true,opacity:0.7})
);
star.position.set(Math.sin(angle)*0.8,1.3+Math.sin(i)*0.2,Math.cos(angle)*0.8);
character.add(star);
character.stars.push({mesh:star,angle:angle,baseY:1.3+Math.sin(i)*0.2});
}

scene.add(character);
}
function createFloor(){
var floorGeo=new THREE.CircleGeometry(2,32);
var floorMat=new THREE.MeshToonMaterial({color:0xcac4bc});
var floor=new THREE.Mesh(floorGeo,floorMat);
floor.rotation.x=-Math.PI/2;
floor.position.y=0;
floor.receiveShadow=true;
scene.add(floor);
}
function animate(){
requestAnimationFrame(animate);
time+=0.03;
// コアの脈動
var pulse=1+Math.sin(time*3)*0.1;
character.core.scale.setScalar(pulse);
character.inner.scale.setScalar(pulse*0.95);
character.glow.scale.setScalar(1+Math.sin(time*2)*0.15);
character.glow.material.opacity=0.2+Math.sin(time*3)*0.1;
// 翼の羽ばたき
var wingAngle=Math.sin(time*4)*0.2;
character.leftWing.rotation.y=wingAngle;
character.rightWing.rotation.y=-wingAngle;
character.leftWingFeathers.forEach(function(f,i){
f.material.opacity=0.5+Math.sin(time*5+i)*0.2;
});
character.rightWingFeathers.forEach(function(f,i){
f.material.opacity=0.5+Math.sin(time*5+i)*0.2;
});
// ハローの回転
character.halo.rotation.z=time*0.5;
character.halo.position.y=2+Math.sin(time*2)*0.05;
// 光線の回転
character.rays.forEach(function(r,i){
r.mesh.rotation.y=time+r.angle;
r.mesh.material.opacity=0.3+Math.sin(time*4+i)*0.2;
});
// 粒子の動き
character.particles.forEach(function(p,i){
p.mesh.position.x=Math.sin(p.angle+time*p.speed)*p.radius;
p.mesh.position.z=Math.cos(p.angle+time*p.speed)*p.radius;
p.mesh.position.y=p.baseY+Math.sin(time*3+i)*0.15;
p.mesh.material.opacity=0.4+Math.sin(time*5+i)*0.3;
});
// 星の周回
character.stars.forEach(function(s,i){
s.mesh.position.x=Math.sin(s.angle+time*0.6)*0.8;
s.mesh.position.z=Math.cos(s.angle+time*0.6)*0.8;
s.mesh.position.y=s.baseY+Math.sin(time*2+i)*0.1;
s.mesh.rotation.x+=0.02;
s.mesh.rotation.y+=0.03;
});
// 全体の浮遊
character.position.y=Math.sin(time*1.5)*0.1;
// 全体の回転
character.rotation.y+=0.01;
renderer.render(scene,camera);
}
init();
</script>
</body>
</html>
