<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>潜水艦型ロボット</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#d8d0c8;display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:sans-serif;}
.container{background:#fff;border-radius:20px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.08);}
h2{text-align:center;color:#8b8178;margin-bottom:15px;font-weight:normal;font-size:18px;}
#canvas{display:block;border-radius:12px;}
</style>
</head>
<body>
<div class="container">
<h2>潜水艦型ロボット</h2>
<canvas id="canvas" width="400" height="400"></canvas>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
var scene,camera,renderer,robot,time=0;
function init(){
scene=new THREE.Scene();
scene.background=new THREE.Color(0xd8d0c8);
camera=new THREE.PerspectiveCamera(50,1,0.1,1000);
camera.position.set(2,2,5);
camera.lookAt(0,1,0);
renderer=new THREE.WebGLRenderer({canvas:document.getElementById('canvas'),antialias:true});
renderer.setSize(400,400);
renderer.shadowMap.enabled=true;
renderer.shadowMap.type=THREE.PCFSoftShadowMap;
var ambLight=new THREE.AmbientLight(0xffffff,0.6);
scene.add(ambLight);
var dirLight=new THREE.DirectionalLight(0xffffff,0.8);
dirLight.position.set(5,10,5);
dirLight.castShadow=true;
dirLight.shadow.mapSize.width=1024;
dirLight.shadow.mapSize.height=1024;
scene.add(dirLight);
createRobot();
createFloor();
animate();
}
function createRobot(){
robot=new THREE.Group();
var bodyColor=0xb8aea4;
var accentColor=0x8a817a;
var eyeColor=0x4a443e;
var cheekColor=0xc9a99c;
var darkColor=0x6a635c;

// メイン船体（楕円形）
var hullGeo=new THREE.SphereGeometry(0.5,32,32);
var hullMat=new THREE.MeshToonMaterial({color:bodyColor});
var hull=new THREE.Mesh(hullGeo,hullMat);
hull.scale.set(1,0.7,2);
hull.position.y=1.3;
hull.castShadow=true;
robot.add(hull);
robot.hull=hull;

// 艦橋（司令塔）
var towerGeo=new THREE.CylinderGeometry(0.25,0.3,0.4,32);
var towerMat=new THREE.MeshToonMaterial({color:bodyColor});
var tower=new THREE.Mesh(towerGeo,towerMat);
tower.position.set(0,1.7,0.1);
tower.castShadow=true;
robot.add(tower);

// 艦橋上部（ドーム・頭部）
var domeGeo=new THREE.SphereGeometry(0.28,32,16,0,Math.PI*2,0,Math.PI/2);
var domeMat=new THREE.MeshToonMaterial({color:bodyColor});
var dome=new THREE.Mesh(domeGeo,domeMat);
dome.position.set(0,1.9,0.1);
robot.add(dome);
robot.head=dome;

// 潜望鏡
var periscopeGeo=new THREE.CylinderGeometry(0.04,0.04,0.5,12);
var periscopeMat=new THREE.MeshToonMaterial({color:accentColor});
var periscope=new THREE.Mesh(periscopeGeo,periscopeMat);
periscope.position.set(0,2.35,0.1);
robot.add(periscope);

var periscopeHead=new THREE.Mesh(new THREE.BoxGeometry(0.08,0.08,0.15),periscopeMat);
periscopeHead.position.set(0,2.65,0.15);
robot.add(periscopeHead);
robot.periscopeHead=periscopeHead;

// 目（潜望鏡先端に）
var eyeGeo=new THREE.SphereGeometry(0.06,12,12);
var eyeMat=new THREE.MeshToonMaterial({color:eyeColor});
var eye=new THREE.Mesh(eyeGeo,eyeMat);
eye.position.set(0,2.65,0.25);
robot.add(eye);

var pupilGeo=new THREE.SphereGeometry(0.03,8,8);
var pupilMat=new THREE.MeshToonMaterial({color:0x2a2520});
var pupil=new THREE.Mesh(pupilGeo,pupilMat);
pupil.position.set(0,2.65,0.31);
robot.add(pupil);

// 頬（艦橋に）
var cheekGeo=new THREE.SphereGeometry(0.08,12,12);
var cheekMat=new THREE.MeshToonMaterial({color:cheekColor});
var leftCheek=new THREE.Mesh(cheekGeo,cheekMat);
leftCheek.position.set(-0.25,1.65,0.2);
leftCheek.scale.set(1,0.6,0.5);
robot.add(leftCheek);
var rightCheek=new THREE.Mesh(cheekGeo,cheekMat);
rightCheek.position.set(0.25,1.65,0.2);
rightCheek.scale.set(1,0.6,0.5);
robot.add(rightCheek);

// 横フィン（安定翼）
var finGeo=new THREE.BoxGeometry(0.6,0.08,0.2);
var finMat=new THREE.MeshToonMaterial({color:accentColor});
var leftFin=new THREE.Mesh(finGeo,finMat);
leftFin.position.set(-0.5,1.3,-0.5);
robot.add(leftFin);
var rightFin=new THREE.Mesh(finGeo,finMat);
rightFin.position.set(0.5,1.3,-0.5);
robot.add(rightFin);

// 尾翼
var tailFinGeo=new THREE.BoxGeometry(0.08,0.35,0.2);
var tailFin=new THREE.Mesh(tailFinGeo,finMat);
tailFin.position.set(0,1.45,-0.95);
robot.add(tailFin);

// プロペラ
var propHub=new THREE.Mesh(new THREE.SphereGeometry(0.1,12,12),new THREE.MeshToonMaterial({color:darkColor}));
propHub.position.set(0,1.3,-1.05);
robot.add(propHub);

var propGroup=new THREE.Group();
for(var i=0;i<4;i++){
var blade=new THREE.Mesh(new THREE.BoxGeometry(0.08,0.25,0.02),new THREE.MeshToonMaterial({color:accentColor}));
blade.position.y=0.12;
blade.rotation.z=i*Math.PI/2;
var bladeGroup=new THREE.Group();
bladeGroup.add(blade);
bladeGroup.rotation.z=i*Math.PI/2;
propGroup.add(bladeGroup);
}
propGroup.position.set(0,1.3,-1.1);
robot.add(propGroup);
robot.propeller=propGroup;

// 船首のライト
var lightGeo=new THREE.SphereGeometry(0.1,12,12);
var lightMat=new THREE.MeshToonMaterial({color:cheekColor,transparent:true,opacity:0.9});
var frontLight=new THREE.Mesh(lightGeo,lightMat);
frontLight.position.set(0,1.2,0.95);
robot.add(frontLight);
robot.frontLight=frontLight;

// 小さな腕（グリッパー）
var armMat=new THREE.MeshToonMaterial({color:bodyColor});
var leftArmGroup=new THREE.Group();
var leftBase=new THREE.Mesh(new THREE.SphereGeometry(0.1,12,12),new THREE.MeshToonMaterial({color:accentColor}));
leftArmGroup.add(leftBase);
var leftArm=new THREE.Mesh(new THREE.CylinderGeometry(0.05,0.05,0.3,10),armMat);
leftArm.rotation.z=Math.PI/2;
leftArm.position.x=-0.15;
leftArmGroup.add(leftArm);
var leftClaw=new THREE.Mesh(new THREE.SphereGeometry(0.08,10,10),new THREE.MeshToonMaterial({color:accentColor}));
leftClaw.position.x=-0.35;
leftArmGroup.add(leftClaw);
leftArmGroup.position.set(-0.45,1.1,0.5);
robot.add(leftArmGroup);
robot.leftArm=leftArmGroup;

var rightArmGroup=new THREE.Group();
var rightBase=new THREE.Mesh(new THREE.SphereGeometry(0.1,12,12),new THREE.MeshToonMaterial({color:accentColor}));
rightArmGroup.add(rightBase);
var rightArm=new THREE.Mesh(new THREE.CylinderGeometry(0.05,0.05,0.3,10),armMat);
rightArm.rotation.z=Math.PI/2;
rightArm.position.x=0.15;
rightArmGroup.add(rightArm);
var rightClaw=new THREE.Mesh(new THREE.SphereGeometry(0.08,10,10),new THREE.MeshToonMaterial({color:accentColor}));
rightClaw.position.x=0.35;
rightArmGroup.add(rightClaw);
rightArmGroup.position.set(0.45,1.1,0.5);
robot.add(rightArmGroup);
robot.rightArm=rightArmGroup;

// 脚（着底用スタンド）
var legMat=new THREE.MeshToonMaterial({color:darkColor});
var legPositions=[{x:-0.3,z:0.3},{x:0.3,z:0.3},{x:-0.3,z:-0.5},{x:0.3,z:-0.5}];
legPositions.forEach(function(pos){
var leg=new THREE.Mesh(new THREE.CylinderGeometry(0.06,0.08,0.4,10),legMat);
leg.position.set(pos.x,0.7,pos.z);
robot.add(leg);
var foot=new THREE.Mesh(new THREE.SphereGeometry(0.1,10,10),new THREE.MeshToonMaterial({color:accentColor}));
foot.position.set(pos.x,0.5,pos.z);
foot.scale.set(1,0.5,1);
robot.add(foot);
});

scene.add(robot);
}
function createFloor(){
var floorGeo=new THREE.CircleGeometry(2.5,32);
var floorMat=new THREE.MeshToonMaterial({color:0xcac4bc});
var floor=new THREE.Mesh(floorGeo,floorMat);
floor.rotation.x=-Math.PI/2;
floor.position.y=0;
floor.receiveShadow=true;
scene.add(floor);
}
function animate(){
requestAnimationFrame(animate);
time+=0.03;
// 浮遊感
robot.position.y=Math.sin(time*1)*0.08;
robot.rotation.z=Math.sin(time*0.8)*0.03;
// プロペラ回転
robot.propeller.rotation.z+=0.15;
// 潜望鏡の回転
robot.periscopeHead.rotation.y=Math.sin(time*0.5)*0.5;
// 腕の動き
robot.leftArm.rotation.y=Math.sin(time*1.2)*0.3;
robot.rightArm.rotation.y=-Math.sin(time*1.2)*0.3;
// ライトの点滅
var brightness=0.7+Math.sin(time*3)*0.3;
robot.frontLight.material.opacity=brightness;
// 全体の回転
robot.rotation.y=Math.sin(time*0.5)*0.25;
renderer.render(scene,camera);
}
init();
</script>
</body>
</html>
