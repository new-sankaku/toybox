<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>クマキャラクター</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#d8d0c8;display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:sans-serif;}
.container{background:#fff;border-radius:20px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.08);}
h2{text-align:center;color:#8b8178;margin-bottom:15px;font-weight:normal;font-size:18px;}
#canvas{display:block;border-radius:12px;}
</style>
</head>
<body>
<div class="container">
<h2>クマキャラクター</h2>
<canvas id="canvas" width="400" height="400"></canvas>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
var scene,camera,renderer,character,time=0;
function init(){
scene=new THREE.Scene();
scene.background=new THREE.Color(0xd8d0c8);
camera=new THREE.PerspectiveCamera(50,1,0.1,1000);
camera.position.set(0,2,5);
camera.lookAt(0,1,0);
renderer=new THREE.WebGLRenderer({canvas:document.getElementById('canvas'),antialias:true});
renderer.setSize(400,400);
renderer.shadowMap.enabled=true;
renderer.shadowMap.type=THREE.PCFSoftShadowMap;
var ambLight=new THREE.AmbientLight(0xffffff,0.6);
scene.add(ambLight);
var dirLight=new THREE.DirectionalLight(0xffffff,0.8);
dirLight.position.set(5,10,5);
dirLight.castShadow=true;
scene.add(dirLight);
createCharacter();
createFloor();
animate();
}
function createCharacter(){
character=new THREE.Group();
var bodyColor=0xb8a898;
var accentColor=0x9a8a78;
var muzzleColor=0xd8ccc0;
var eyeColor=0x3a3530;
var cheekColor=0xd8a8a0;
var noseColor=0x4a4038;

// 胴体（ぽっちゃり）
var bodyGeo=new THREE.SphereGeometry(0.65,32,32);
var bodyMat=new THREE.MeshToonMaterial({color:bodyColor});
var body=new THREE.Mesh(bodyGeo,bodyMat);
body.scale.set(1,1,0.9);
body.position.y=0.9;
body.castShadow=true;
character.add(body);
character.body=body;

// お腹
var bellyGeo=new THREE.SphereGeometry(0.4,24,24);
var bellyMat=new THREE.MeshToonMaterial({color:muzzleColor});
var belly=new THREE.Mesh(bellyGeo,bellyMat);
belly.position.set(0,0.8,0.35);
belly.scale.set(1,1.1,0.5);
character.add(belly);

// 頭
var headGeo=new THREE.SphereGeometry(0.5,32,32);
var headMat=new THREE.MeshToonMaterial({color:bodyColor});
var head=new THREE.Mesh(headGeo,headMat);
head.position.set(0,1.7,0.1);
head.castShadow=true;
character.add(head);
character.head=head;

// マズル
var muzzleGeo=new THREE.SphereGeometry(0.22,24,24);
var muzzle=new THREE.Mesh(muzzleGeo,new THREE.MeshToonMaterial({color:muzzleColor}));
muzzle.position.set(0,1.55,0.5);
muzzle.scale.set(1,0.8,0.7);
character.add(muzzle);

// 鼻
var noseGeo=new THREE.SphereGeometry(0.08,12,12);
var nose=new THREE.Mesh(noseGeo,new THREE.MeshToonMaterial({color:noseColor}));
nose.position.set(0,1.6,0.68);
nose.scale.set(1.2,0.8,0.8);
character.add(nose);

// 口
var mouthGeo=new THREE.TorusGeometry(0.05,0.015,8,12,Math.PI);
var mouthMat=new THREE.MeshToonMaterial({color:noseColor});
var mouth=new THREE.Mesh(mouthGeo,mouthMat);
mouth.position.set(0,1.48,0.62);
mouth.rotation.x=Math.PI;
character.add(mouth);

// 目
var eyeGeo=new THREE.SphereGeometry(0.08,16,16);
var eyeMat=new THREE.MeshToonMaterial({color:eyeColor});
var leftEye=new THREE.Mesh(eyeGeo,eyeMat);
leftEye.position.set(-0.18,1.78,0.4);
character.add(leftEye);
var rightEye=new THREE.Mesh(eyeGeo,eyeMat);
rightEye.position.set(0.18,1.78,0.4);
character.add(rightEye);

// 瞳ハイライト
var highlightGeo=new THREE.SphereGeometry(0.025,8,8);
var highlightMat=new THREE.MeshToonMaterial({color:0xffffff});
var leftHighlight=new THREE.Mesh(highlightGeo,highlightMat);
leftHighlight.position.set(-0.16,1.8,0.48);
character.add(leftHighlight);
var rightHighlight=new THREE.Mesh(highlightGeo,highlightMat);
rightHighlight.position.set(0.2,1.8,0.48);
character.add(rightHighlight);

// 頬
var cheekGeo=new THREE.SphereGeometry(0.08,12,12);
var cheekMat=new THREE.MeshToonMaterial({color:cheekColor});
var leftCheek=new THREE.Mesh(cheekGeo,cheekMat);
leftCheek.position.set(-0.32,1.6,0.4);
leftCheek.scale.set(1,0.6,0.5);
character.add(leftCheek);
var rightCheek=new THREE.Mesh(cheekGeo,cheekMat);
rightCheek.position.set(0.32,1.6,0.4);
rightCheek.scale.set(1,0.6,0.5);
character.add(rightCheek);

// 丸い耳
var earGeo=new THREE.SphereGeometry(0.15,16,16);
var earMat=new THREE.MeshToonMaterial({color:bodyColor});
var leftEar=new THREE.Mesh(earGeo,earMat);
leftEar.position.set(-0.35,2.1,0);
character.add(leftEar);
character.leftEar=leftEar;
var rightEar=new THREE.Mesh(earGeo,earMat);
rightEar.position.set(0.35,2.1,0);
character.add(rightEar);
character.rightEar=rightEar;

// 耳の内側
var innerEarGeo=new THREE.SphereGeometry(0.08,12,12);
var innerEarMat=new THREE.MeshToonMaterial({color:cheekColor});
var leftInnerEar=new THREE.Mesh(innerEarGeo,innerEarMat);
leftInnerEar.position.set(-0.35,2.1,0.08);
character.add(leftInnerEar);
var rightInnerEar=new THREE.Mesh(innerEarGeo,innerEarMat);
rightInnerEar.position.set(0.35,2.1,0.08);
character.add(rightInnerEar);

// 腕
var armMat=new THREE.MeshToonMaterial({color:bodyColor});
var leftArmGroup=new THREE.Group();
var leftArm=new THREE.Mesh(new THREE.CapsuleGeometry(0.15,0.3,8,12),armMat);
leftArmGroup.add(leftArm);
var leftPaw=new THREE.Mesh(new THREE.SphereGeometry(0.12,12,12),new THREE.MeshToonMaterial({color:accentColor}));
leftPaw.position.y=-0.25;
leftArmGroup.add(leftPaw);
leftArmGroup.position.set(-0.65,1.1,0.1);
leftArmGroup.rotation.z=0.4;
character.add(leftArmGroup);
character.leftArm=leftArmGroup;

var rightArmGroup=new THREE.Group();
var rightArm=new THREE.Mesh(new THREE.CapsuleGeometry(0.15,0.3,8,12),armMat);
rightArmGroup.add(rightArm);
var rightPaw=new THREE.Mesh(new THREE.SphereGeometry(0.12,12,12),new THREE.MeshToonMaterial({color:accentColor}));
rightPaw.position.y=-0.25;
rightArmGroup.add(rightPaw);
rightArmGroup.position.set(0.65,1.1,0.1);
rightArmGroup.rotation.z=-0.4;
character.add(rightArmGroup);
character.rightArm=rightArmGroup;

// 足
var legMat=new THREE.MeshToonMaterial({color:bodyColor});
var leftLeg=new THREE.Mesh(new THREE.CapsuleGeometry(0.15,0.2,8,12),legMat);
leftLeg.position.set(-0.3,0.35,0);
character.add(leftLeg);
var rightLeg=new THREE.Mesh(new THREE.CapsuleGeometry(0.15,0.2,8,12),legMat);
rightLeg.position.set(0.3,0.35,0);
character.add(rightLeg);

// 足先
var footMat=new THREE.MeshToonMaterial({color:accentColor});
var leftFoot=new THREE.Mesh(new THREE.SphereGeometry(0.18,12,12),footMat);
leftFoot.position.set(-0.3,0.12,0.08);
leftFoot.scale.set(1,0.5,1.3);
character.add(leftFoot);
var rightFoot=new THREE.Mesh(new THREE.SphereGeometry(0.18,12,12),footMat);
rightFoot.position.set(0.3,0.12,0.08);
rightFoot.scale.set(1,0.5,1.3);
character.add(rightFoot);

// しっぽ（小さい）
var tail=new THREE.Mesh(new THREE.SphereGeometry(0.1,12,12),new THREE.MeshToonMaterial({color:bodyColor}));
tail.position.set(0,0.7,-0.55);
character.add(tail);
character.tail=tail;

scene.add(character);
}
function createFloor(){
var floorGeo=new THREE.CircleGeometry(2,32);
var floorMat=new THREE.MeshToonMaterial({color:0xcac4bc});
var floor=new THREE.Mesh(floorGeo,floorMat);
floor.rotation.x=-Math.PI/2;
floor.position.y=0;
floor.receiveShadow=true;
scene.add(floor);
}
function animate(){
requestAnimationFrame(animate);
time+=0.03;
// 頭の動き
character.head.rotation.z=Math.sin(time*1.2)*0.08;
character.head.position.y=1.7+Math.sin(time*2)*0.03;
// 耳の動き
character.leftEar.scale.setScalar(1+Math.sin(time*4)*0.1);
character.rightEar.scale.setScalar(1+Math.sin(time*4+1)*0.1);
// 腕の動き
character.leftArm.rotation.z=0.4+Math.sin(time*1.5)*0.2;
character.rightArm.rotation.z=-0.4-Math.sin(time*1.5+Math.PI)*0.2;
// 体の揺れ
character.body.rotation.z=Math.sin(time*1)*0.03;
// しっぽ
character.tail.position.y=0.7+Math.sin(time*3)*0.02;
// 全体の回転
character.rotation.y=Math.sin(time*0.5)*0.3;
renderer.render(scene,camera);
}
init();
</script>
</body>
</html>
