<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>飛行機ロボット</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{background:#d8d0c8;display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:sans-serif;}
.container{background:#fff;border-radius:20px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.08);}
h2{text-align:center;color:#8b8178;margin-bottom:15px;font-weight:normal;font-size:18px;}
#canvas{display:block;border-radius:12px;}
</style>
</head>
<body>
<div class="container">
<h2>飛行機ロボット</h2>
<canvas id="canvas" width="400" height="400"></canvas>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script>
var scene,camera,renderer,robot,time=0;
function init(){
scene=new THREE.Scene();
scene.background=new THREE.Color(0xd8d0c8);
camera=new THREE.PerspectiveCamera(50,1,0.1,1000);
camera.position.set(2,3,6);
camera.lookAt(0,1.5,0);
renderer=new THREE.WebGLRenderer({canvas:document.getElementById('canvas'),antialias:true});
renderer.setSize(400,400);
renderer.shadowMap.enabled=true;
renderer.shadowMap.type=THREE.PCFSoftShadowMap;
var ambLight=new THREE.AmbientLight(0xffffff,0.6);
scene.add(ambLight);
var dirLight=new THREE.DirectionalLight(0xffffff,0.8);
dirLight.position.set(5,10,5);
dirLight.castShadow=true;
dirLight.shadow.mapSize.width=1024;
dirLight.shadow.mapSize.height=1024;
scene.add(dirLight);
createRobot();
createFloor();
animate();
}
function createRobot(){
robot=new THREE.Group();
var bodyColor=0xb8aea4;
var accentColor=0x8a817a;
var eyeColor=0x4a443e;
var cheekColor=0xc9a99c;
var darkColor=0x6a635c;
var wingColor=0xa09890;

// 飛行機ボディ（胴体）
var fuselageGeo=new THREE.CylinderGeometry(0.35,0.4,1.8,32);
var fuselageMat=new THREE.MeshToonMaterial({color:bodyColor});
var fuselage=new THREE.Mesh(fuselageGeo,fuselageMat);
fuselage.rotation.x=Math.PI/2;
fuselage.position.y=1.8;
fuselage.castShadow=true;
robot.add(fuselage);

// コックピット（頭部・顔）
var cockpitGeo=new THREE.SphereGeometry(0.45,32,32);
var cockpitMat=new THREE.MeshToonMaterial({color:bodyColor});
var cockpit=new THREE.Mesh(cockpitGeo,cockpitMat);
cockpit.position.set(0,1.8,1.1);
cockpit.scale.set(1,0.9,0.8);
cockpit.castShadow=true;
robot.add(cockpit);
robot.head=cockpit;

// 目
var eyeGeo=new THREE.SphereGeometry(0.12,16,16);
var eyeMat=new THREE.MeshToonMaterial({color:eyeColor});
var leftEye=new THREE.Mesh(eyeGeo,eyeMat);
leftEye.position.set(-0.18,1.85,1.45);
robot.add(leftEye);
var rightEye=new THREE.Mesh(eyeGeo,eyeMat);
rightEye.position.set(0.18,1.85,1.45);
robot.add(rightEye);

// 瞳
var pupilGeo=new THREE.SphereGeometry(0.05,12,12);
var pupilMat=new THREE.MeshToonMaterial({color:0x2a2520});
var leftPupil=new THREE.Mesh(pupilGeo,pupilMat);
leftPupil.position.set(-0.18,1.85,1.57);
robot.add(leftPupil);
var rightPupil=new THREE.Mesh(pupilGeo,pupilMat);
rightPupil.position.set(0.18,1.85,1.57);
robot.add(rightPupil);

// 頬
var cheekGeo=new THREE.SphereGeometry(0.08,16,16);
var cheekMat=new THREE.MeshToonMaterial({color:cheekColor});
var leftCheek=new THREE.Mesh(cheekGeo,cheekMat);
leftCheek.position.set(-0.32,1.7,1.35);
leftCheek.scale.set(1,0.6,0.5);
robot.add(leftCheek);
var rightCheek=new THREE.Mesh(cheekGeo,cheekMat);
rightCheek.position.set(0.32,1.7,1.35);
rightCheek.scale.set(1,0.6,0.5);
robot.add(rightCheek);

// アンテナ（機首上部）
var antennaGeo=new THREE.CylinderGeometry(0.03,0.03,0.3,12);
var antennaMat=new THREE.MeshToonMaterial({color:accentColor});
var antenna=new THREE.Mesh(antennaGeo,antennaMat);
antenna.position.set(0,2.35,1);
robot.add(antenna);
var antennaTipGeo=new THREE.SphereGeometry(0.06,16,16);
var antennaTipMat=new THREE.MeshToonMaterial({color:cheekColor});
var antennaTip=new THREE.Mesh(antennaTipGeo,antennaTipMat);
antennaTip.position.set(0,2.55,1);
robot.add(antennaTip);
robot.antennaTip=antennaTip;

// 尾翼（垂直）
var tailFinGeo=new THREE.BoxGeometry(0.08,0.5,0.4);
var tailFinMat=new THREE.MeshToonMaterial({color:wingColor});
var tailFin=new THREE.Mesh(tailFinGeo,tailFinMat);
tailFin.position.set(0,2.15,-0.7);
robot.add(tailFin);

// 尾翼（水平）
var hTailGeo=new THREE.BoxGeometry(0.8,0.06,0.3);
var hTailMat=new THREE.MeshToonMaterial({color:wingColor});
var hTail=new THREE.Mesh(hTailGeo,hTailMat);
hTail.position.set(0,1.9,-0.75);
robot.add(hTail);

// 主翼
var wingGeo=new THREE.BoxGeometry(2.2,0.08,0.5);
var wingMat=new THREE.MeshToonMaterial({color:wingColor});
var wings=new THREE.Mesh(wingGeo,wingMat);
wings.position.set(0,1.75,0.2);
wings.castShadow=true;
robot.add(wings);
robot.wings=wings;

// 翼端のライト
var wingLightGeo=new THREE.SphereGeometry(0.08,12,12);
var leftWingLight=new THREE.Mesh(wingLightGeo,new THREE.MeshToonMaterial({color:cheekColor}));
leftWingLight.position.set(-1.15,1.75,0.2);
robot.add(leftWingLight);
robot.leftWingLight=leftWingLight;
var rightWingLight=new THREE.Mesh(wingLightGeo,new THREE.MeshToonMaterial({color:cheekColor}));
rightWingLight.position.set(1.15,1.75,0.2);
robot.add(rightWingLight);
robot.rightWingLight=rightWingLight;

// エンジンナセル（翼下）
var engineGeo=new THREE.CylinderGeometry(0.12,0.15,0.4,16);
var engineMat=new THREE.MeshToonMaterial({color:accentColor});
var leftEngine=new THREE.Mesh(engineGeo,engineMat);
leftEngine.rotation.x=Math.PI/2;
leftEngine.position.set(-0.7,1.55,0.2);
robot.add(leftEngine);
var rightEngine=new THREE.Mesh(engineGeo,engineMat);
rightEngine.rotation.x=Math.PI/2;
rightEngine.position.set(0.7,1.55,0.2);
robot.add(rightEngine);

// 2脚
var legMat=new THREE.MeshToonMaterial({color:bodyColor});

// 左脚
var leftLegGroup=new THREE.Group();
var leftHip=new THREE.Mesh(new THREE.SphereGeometry(0.15,16,16),new THREE.MeshToonMaterial({color:accentColor}));
leftLegGroup.add(leftHip);
var leftUpperLeg=new THREE.Mesh(new THREE.CylinderGeometry(0.1,0.1,0.5,16),legMat);
leftUpperLeg.position.y=-0.3;
leftLegGroup.add(leftUpperLeg);
var leftKnee=new THREE.Mesh(new THREE.SphereGeometry(0.12,16,16),new THREE.MeshToonMaterial({color:accentColor}));
leftKnee.position.y=-0.6;
leftLegGroup.add(leftKnee);
var leftLowerLeg=new THREE.Mesh(new THREE.CylinderGeometry(0.08,0.08,0.5,16),legMat);
leftLowerLeg.position.y=-0.9;
leftLegGroup.add(leftLowerLeg);
var leftFoot=new THREE.Mesh(new THREE.SphereGeometry(0.15,16,16),new THREE.MeshToonMaterial({color:darkColor}));
leftFoot.position.set(0,-1.2,0.08);
leftFoot.scale.set(1,0.5,1.4);
leftLegGroup.add(leftFoot);
leftLegGroup.position.set(-0.4,1.3,0.3);
robot.add(leftLegGroup);
robot.leftLeg=leftLegGroup;

// 右脚
var rightLegGroup=new THREE.Group();
var rightHip=new THREE.Mesh(new THREE.SphereGeometry(0.15,16,16),new THREE.MeshToonMaterial({color:accentColor}));
rightLegGroup.add(rightHip);
var rightUpperLeg=new THREE.Mesh(new THREE.CylinderGeometry(0.1,0.1,0.5,16),legMat);
rightUpperLeg.position.y=-0.3;
rightLegGroup.add(rightUpperLeg);
var rightKnee=new THREE.Mesh(new THREE.SphereGeometry(0.12,16,16),new THREE.MeshToonMaterial({color:accentColor}));
rightKnee.position.y=-0.6;
rightLegGroup.add(rightKnee);
var rightLowerLeg=new THREE.Mesh(new THREE.CylinderGeometry(0.08,0.08,0.5,16),legMat);
rightLowerLeg.position.y=-0.9;
rightLegGroup.add(rightLowerLeg);
var rightFoot=new THREE.Mesh(new THREE.SphereGeometry(0.15,16,16),new THREE.MeshToonMaterial({color:darkColor}));
rightFoot.position.set(0,-1.2,0.08);
rightFoot.scale.set(1,0.5,1.4);
rightLegGroup.add(rightFoot);
rightLegGroup.position.set(0.4,1.3,0.3);
robot.add(rightLegGroup);
robot.rightLeg=rightLegGroup;

scene.add(robot);
}
function createFloor(){
var floorGeo=new THREE.CircleGeometry(2.5,32);
var floorMat=new THREE.MeshToonMaterial({color:0xcac4bc});
var floor=new THREE.Mesh(floorGeo,floorMat);
floor.rotation.x=-Math.PI/2;
floor.position.y=0;
floor.receiveShadow=true;
scene.add(floor);
}
function animate(){
requestAnimationFrame(animate);
time+=0.03;
// 全体の浮遊
robot.position.y=Math.sin(time*1.5)*0.1;
// 頭の動き
robot.head.position.y=1.8+Math.sin(time*2)*0.03;
// アンテナの揺れ
robot.antennaTip.position.y=2.55+Math.sin(time*3)*0.04;
// 翼の傾き
robot.wings.rotation.z=Math.sin(time*1.2)*0.05;
// 脚の歩行
robot.leftLeg.rotation.x=Math.sin(time*2)*0.2;
robot.rightLeg.rotation.x=-Math.sin(time*2)*0.2;
// 翼端ライトの点滅
var brightness=0.6+Math.sin(time*5)*0.4;
robot.leftWingLight.material.color.setRGB(brightness*0.79,brightness*0.66,brightness*0.61);
robot.rightWingLight.material.color.setRGB(brightness*0.79,brightness*0.66,brightness*0.61);
// 全体の回転
robot.rotation.y=Math.sin(time*0.5)*0.25;
renderer.render(scene,camera);
}
init();
</script>
</body>
</html>
