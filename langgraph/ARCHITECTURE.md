# LangGraph ã‚²ãƒ¼ãƒ é–‹ç™ºã‚·ã‚¹ãƒ†ãƒ  - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯LangGraph ã‚²ãƒ¼ãƒ é–‹ç™ºã‚·ã‚¹ãƒ†ãƒ ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®šç¾©ã—ã¾ã™ã€‚
ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆã€Agentä¸€è¦§ã€ãƒ•ãƒ­ãƒ¼ã€çŠ¶æ…‹ç®¡ç†ã‚’å«ã¿ã¾ã™ã€‚

é–‹ç™ºè¦ç´„ã«ã¤ã„ã¦ã¯ [DEVELOPMENT_RULES.md](./DEVELOPMENT_RULES.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ç”¨èªå®šç¾©

| ç”¨èª | å®šç¾© |
|------|------|
| **Agent** | LangGraphä¸Šã®1ãƒãƒ¼ãƒ‰ã€‚å˜ä¸€ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹LLMãƒ™ãƒ¼ã‚¹ã®å‡¦ç†å˜ä½ |
| **Leader** | é…ä¸‹ã®Agentã‚’çµ±æ‹¬ã—ã€ã‚¿ã‚¹ã‚¯åˆ†é…ãƒ»é€²æ—ç®¡ç†ã‚’è¡Œã†ä¸Šä½Agent |
| **Orchestrator** | å…¨ä½“ã‚’çµ±æ‹¬ã—ã€ãƒ•ã‚§ãƒ¼ã‚ºé–“ã®é·ç§»ãƒ»Humané€£æºã‚’ç®¡ç†ã™ã‚‹æœ€ä¸Šä½Agent |
| **Checkpoint** | Humanæ‰¿èªã‚’å¾…ã¤ä¸­æ–­ãƒã‚¤ãƒ³ãƒˆã€‚`interrupt()`ã§å®Ÿè£… |
| **State** | ã‚°ãƒ©ãƒ•å…¨ä½“ã§å…±æœ‰ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã€‚å„AgentãŒèª­ã¿æ›¸ã |
| **ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** | 1ã¤ã®æ©Ÿèƒ½å˜ä½ã‚’ä¼ç”»â†’å®Ÿè£…â†’ãƒ†ã‚¹ãƒˆã¾ã§å®Œçµã•ã›ã‚‹ã‚µã‚¤ã‚¯ãƒ« |

---

## ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

```
[Orchestrator]
      |
      v

Phase1: ä¼ç”»
[Concept] -> [Design] -> [Scenario] -> [Character] -> [World] -> [TaskSplit]
    â†“â†‘          â†“â†‘          â†“â†‘            â†“â†‘           â†“â†‘           â†“â†‘
[ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½ äººé–“ã«ã‚ˆã‚‹æ‰¿èªã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½]
                                                                     |
                                                                     v
                                                              Phase1 å®Œäº†
                                                                     |
                                                                     v

Phase2: é–‹ç™º
[CodeLeader] -> [AssetLeader] -> [CodeAgents] -> [AssetAgents] -> [Integrator]
     â†“â†‘              â†“â†‘              â†“â†‘              â†“â†‘              â†“â†‘
[ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½ äººé–“ã«ã‚ˆã‚‹æ‰¿èªã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ ï½ï½ï½ï½ï½ï½ï½ï½ï½ï½]
                                                                     |
                                                                     v
                                                              Phase2 å®Œäº†
                                                                     |
                                                                     v

Phase3: å“è³ª
[Test] -> [Review]
  â†“â†‘         â†“â†‘
[ï½ï½ äººé–“ã«ã‚ˆã‚‹æ‰¿èªã¨ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ ï½ï½]
               |
               v
         Phase3 å®Œäº†
               |
       +-------+-------+
       |               |
       v               v
  [Release]     [Phase2ã¸æˆ»ã‚‹]
   (æ‰¿èª)          (ä¿®æ­£)
```

Humanä»‹å…¥ã¯å…¨13ç®‡æ‰€ã€‚å„ãƒã‚¤ãƒ³ãƒˆã§ã€Œæ‰¿èªã€ã€Œä¿®æ­£æŒ‡ç¤ºã€ã€Œå´ä¸‹ã€ã‚’é¸æŠå¯ã€‚

---

## ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ–¹å¼ï¼ˆã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™ºï¼‰

**ä¸€åº¦ã«å…¨ã¦ã‚’ä½œã‚‰ãªã„ã€‚** æ©Ÿèƒ½å˜ä½ã§æ®µéšçš„ã«é–‹ç™ºã—ã¾ã™ã€‚

```mermaid
flowchart LR
    subgraph Iteration1["ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³1: ã‚³ã‚¢æ©Ÿèƒ½"]
        I1P["ä¼ç”»"] --> I1D["é–‹ç™º"] --> I1Q["å“è³ª"]
    end

    subgraph Iteration2["ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³2: è¿½åŠ æ©Ÿèƒ½"]
        I2P["ä¼ç”»"] --> I2D["é–‹ç™º"] --> I2Q["å“è³ª"]
    end

    subgraph Iteration3["ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³3: æ”¹å–„"]
        I3P["ä¼ç”»"] --> I3D["é–‹ç™º"] --> I3Q["å“è³ª"]
    end

    Iteration1 --> Iteration2 --> Iteration3 --> Release["ğŸ®"]
```

### ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¾‹

| ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ | ç›®æ¨™ | å«ã¾ã‚Œã‚‹æ©Ÿèƒ½ |
|--------------|------|------------|
| **1: ã‚³ã‚¢** | æœ€å°é™å‹•ãã‚‚ã® | ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã€åŸºæœ¬æ“ä½œã€1ã‚¹ãƒ†ãƒ¼ã‚¸ |
| **2: æ‹¡å¼µ** | ã‚²ãƒ¼ãƒ ã‚‰ã—ãã™ã‚‹ | UIã€ã‚»ãƒ¼ãƒ–/ãƒ­ãƒ¼ãƒ‰ã€è¿½åŠ ã‚¹ãƒ†ãƒ¼ã‚¸ |
| **3: æ¼”å‡º** | å®Œæˆåº¦ã‚’ä¸Šã’ã‚‹ | BGM/SEã€ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã€æ¼”å‡º |
| **4: èª¿æ•´** | ãƒªãƒªãƒ¼ã‚¹æº–å‚™ | ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã€ãƒã‚°ä¿®æ­£ã€æœ€é©åŒ– |

### å„ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æµã‚Œ

```mermaid
stateDiagram-v2
    [*] --> ä¼ç”»æ‰¿èª
    ä¼ç”»æ‰¿èª --> ã‚¿ã‚¹ã‚¯åˆ†è§£
    ã‚¿ã‚¹ã‚¯åˆ†è§£ --> é–‹ç™º

    state é–‹ç™º {
        [*] --> Assetä¸¦åˆ—
        [*] --> Codeä¸¦åˆ—
        Assetä¸¦åˆ— --> çµ±åˆå¾…ã¡
        Codeä¸¦åˆ— --> çµ±åˆå¾…ã¡
        çµ±åˆå¾…ã¡ --> [*]
    }

    é–‹ç™º --> ãƒ†ã‚¹ãƒˆ
    ãƒ†ã‚¹ãƒˆ --> ãƒ¬ãƒ“ãƒ¥ãƒ¼
    ãƒ¬ãƒ“ãƒ¥ãƒ¼ --> æ¬¡ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³: æ‰¿èª
    ãƒ¬ãƒ“ãƒ¥ãƒ¼ --> é–‹ç™º: ä¿®æ­£å¿…è¦
```

---

## ã‚¿ã‚¹ã‚¯åˆ†è§£ã®è©³ç´°

### TaskSplit Agentã®å½¹å‰²

TaskSplitã¯ä¼ç”»ãƒ»è¨­è¨ˆã‚’**å…·ä½“çš„ãªé–‹ç™ºã‚¿ã‚¹ã‚¯**ã«åˆ†è§£ã—ã¾ã™ã€‚

```mermaid
flowchart TB
    TaskSplit["ğŸ¤– TaskSplit Agent"]

    TaskSplit --> CodeTasks["ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯ä¸€è¦§"]
    TaskSplit --> AssetTasks["ã‚¢ã‚»ãƒƒãƒˆã‚¿ã‚¹ã‚¯ä¸€è¦§"]
    TaskSplit --> Dependencies["ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—"]

    subgraph CodeTasks
        CT1["GameLoopå®Ÿè£…"]
        CT2["Stateç®¡ç†å®Ÿè£…"]
        CT3["UIå®Ÿè£…"]
    end

    subgraph AssetTasks
        AT1["ã‚­ãƒ£ãƒ©ç”»åƒç”Ÿæˆ"]
        AT2["èƒŒæ™¯ç”»åƒç”Ÿæˆ"]
        AT3["BGMç”Ÿæˆ"]
    end

    subgraph Dependencies["ä¾å­˜é–¢ä¿‚"]
        D1["UIå®Ÿè£… â†’ UIã‚¢ã‚»ãƒƒãƒˆå¿…è¦"]
        D2["Dialogå®Ÿè£… â†’ ã‚­ãƒ£ãƒ©ç”»åƒå¿…è¦"]
        D3["Audioå®Ÿè£… â†’ BGM/SEå¿…è¦"]
    end
```

### ã‚¿ã‚¹ã‚¯åˆ†è§£ã®å‡ºåŠ›å½¢å¼

```json
{
  "iteration": 1,
  "iteration_goal": "ã‚³ã‚¢ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã®å®Ÿè£…",

  "code_tasks": [
    {
      "id": "code_001",
      "name": "GameLoopå®Ÿè£…",
      "description": "ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—ã¨ãƒ•ãƒ¬ãƒ¼ãƒ ç®¡ç†",
      "priority": 1,
      "depends_on": [],
      "required_assets": []
    },
    {
      "id": "code_002",
      "name": "PlayerControllerå®Ÿè£…",
      "description": "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ“ä½œã®å…¥åŠ›å‡¦ç†",
      "priority": 2,
      "depends_on": ["code_001"],
      "required_assets": ["asset_001"]
    }
  ],

  "asset_tasks": [
    {
      "id": "asset_001",
      "name": "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚­ãƒ£ãƒ©ç”»åƒ",
      "type": "image",
      "description": "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆç”»åƒ",
      "priority": 1,
      "specs": {
        "format": "PNG",
        "size": "64x64",
        "frames": 8
      }
    }
  ],

  "dependencies": {
    "code_002": ["asset_001"],
    "code_005": ["asset_002", "asset_003"]
  }
}
```

---

## ãƒ•ã‚§ãƒ¼ã‚º2: é–‹ç™ºã®è©³ç´°æ§‹é€ 

### Leader Agentã®å½¹å‰²

```mermaid
flowchart TB
    subgraph Phase2["ãƒ•ã‚§ãƒ¼ã‚º2: é–‹ç™º"]
        Orch["Orchestrator"] --> CL["ğŸ–ï¸ Code Leader"]
        Orch --> AL["ğŸ–ï¸ Asset Leader"]

        subgraph CodeLeaderScope["Code Leaderã®ç®¡è½„"]
            CL --> |"ã‚¿ã‚¹ã‚¯å‰²å½“"| CA1["GameLoop Agent"]
            CL --> |"ã‚¿ã‚¹ã‚¯å‰²å½“"| CA2["State Agent"]
            CL --> |"ã‚¿ã‚¹ã‚¯å‰²å½“"| CA3["UI Agent"]
            CL --> |"é€²æ—ç¢ºèª"| CodeProgress["ã‚³ãƒ¼ãƒ‰é€²æ—"]
            CL --> |"çµ±åˆæŒ‡ç¤º"| CodeIntegrate["ã‚³ãƒ¼ãƒ‰çµ±åˆ"]
        end

        subgraph AssetLeaderScope["Asset Leaderã®ç®¡è½„"]
            AL --> |"ã‚¿ã‚¹ã‚¯å‰²å½“"| AA1["Image Agent"]
            AL --> |"ã‚¿ã‚¹ã‚¯å‰²å½“"| AA2["Audio Agent"]
            AL --> |"é€²æ—ç¢ºèª"| AssetProgress["ã‚¢ã‚»ãƒƒãƒˆé€²æ—"]
            AL --> |"ç´å“ç®¡ç†"| AssetDeliver["ã‚¢ã‚»ãƒƒãƒˆç´å“"]
        end

        CodeIntegrate <-.-> |"ã‚¢ã‚»ãƒƒãƒˆè¦æ±‚"| AssetDeliver
    end
```

### Code Leader

| è²¬å‹™ | è©³ç´° |
|-----|------|
| **ã‚¿ã‚¹ã‚¯ç®¡ç†** | ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯ã‚’Agentã«å‰²ã‚Šå½“ã¦ |
| **ä¾å­˜é–¢ä¿‚è§£æ±º** | ä¾å­˜é †åºã«å¾“ã£ã¦å®Ÿè¡Œé †ã‚’æ±ºå®š |
| **ã‚¢ã‚»ãƒƒãƒˆé€£æº** | å¿…è¦ãªã‚¢ã‚»ãƒƒãƒˆã‚’Asset Leaderã«è¦æ±‚ |
| **çµ±åˆ** | å„Agentã®å‡ºåŠ›ã‚’çµ±åˆ |
| **å“è³ªç¢ºèª** | ã‚³ãƒ¼ãƒ‰ãŒå‹•ä½œã™ã‚‹ã‹ç¢ºèª |

### Asset Leader

| è²¬å‹™ | è©³ç´° |
|-----|------|
| **ã‚¿ã‚¹ã‚¯ç®¡ç†** | ã‚¢ã‚»ãƒƒãƒˆã‚¿ã‚¹ã‚¯ã‚’Agentã«å‰²ã‚Šå½“ã¦ |
| **ä»•æ§˜ç®¡ç†** | ã‚¢ã‚»ãƒƒãƒˆã®ä»•æ§˜ï¼ˆã‚µã‚¤ã‚ºã€å½¢å¼ç­‰ï¼‰ã‚’ç®¡ç† |
| **ç´å“ç®¡ç†** | å®Œæˆã‚¢ã‚»ãƒƒãƒˆã®ç´å“ãƒ»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† |
| **ãƒªã‚¯ã‚¨ã‚¹ãƒˆå¯¾å¿œ** | Code Leaderã‹ã‚‰ã®è¦æ±‚ã«å¯¾å¿œ |

---

## Asset-Codeé–“ã®ç´ã¥ã‘

### ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ”ãƒ³ã‚°

```mermaid
flowchart LR
    subgraph Assets["ã‚¢ã‚»ãƒƒãƒˆ"]
        A1["player.png"]
        A2["enemy.png"]
        A3["bg_stage1.png"]
        A4["bgm_main.mp3"]
        A5["se_jump.wav"]
    end

    subgraph Code["ã‚³ãƒ¼ãƒ‰"]
        C1["PlayerController"]
        C2["EnemyController"]
        C3["StageRenderer"]
        C4["AudioManager"]
    end

    A1 --> C1
    A2 --> C2
    A3 --> C3
    A4 --> C4
    A5 --> C4
```

### ä¾å­˜é–¢ä¿‚ã®çŠ¶æ…‹ç®¡ç†

```python
class AssetCodeDependency(TypedDict):
    code_task_id: str
    required_assets: list[str]
    status: Literal["waiting", "ready", "integrated"]

# ä¾‹
dependencies = [
    {
        "code_task_id": "code_002",  # PlayerController
        "required_assets": ["asset_001"],  # player.png
        "status": "waiting"  # ã‚¢ã‚»ãƒƒãƒˆå¾…ã¡
    },
    {
        "code_task_id": "code_005",  # AudioManager
        "required_assets": ["asset_004", "asset_005"],  # BGM, SE
        "status": "ready"  # ã‚¢ã‚»ãƒƒãƒˆæƒã£ãŸ
    }
]
```

### é–‹ç™ºãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant CL as Code Leader
    participant AL as Asset Leader
    participant CA as Code Agent
    participant AA as Asset Agent

    CL->>AL: ã‚¢ã‚»ãƒƒãƒˆè¦æ±‚ï¼ˆplayer.pngï¼‰
    AL->>AA: ç”»åƒç”Ÿæˆã‚¿ã‚¹ã‚¯
    AA->>AL: ç”»åƒå®Œæˆ
    AL->>CL: ã‚¢ã‚»ãƒƒãƒˆç´å“é€šçŸ¥
    CL->>CA: ã‚³ãƒ¼ãƒ‰å®Ÿè£…ã‚¿ã‚¹ã‚¯ï¼ˆã‚¢ã‚»ãƒƒãƒˆä»˜ãï¼‰
    CA->>CL: å®Ÿè£…å®Œäº†
```

---

## Agentä¸€è¦§ï¼ˆHumanæ‰¿èªãƒã‚¤ãƒ³ãƒˆä»˜ãï¼‰

### å‡¡ä¾‹

```mermaid
flowchart LR
    L1["ğŸ¤– Agent"] --> L2["ğŸ‘¤ Humanç¢ºèª"]
    L3["ğŸ–ï¸ Leader"]
```

### ãƒ•ã‚§ãƒ¼ã‚º1: ä¼ç”»ï¼ˆé †æ¬¡å®Ÿè¡Œï¼‰

```mermaid
flowchart LR
    C["ğŸ¤– ä¼ç”»"] --> HC["ğŸ‘¤"] --> D["ğŸ¤– è¨­è¨ˆ"] --> HD["ğŸ‘¤"] --> S["ğŸ¤– ã‚·ãƒŠãƒªã‚ª"] --> HS["ğŸ‘¤"] --> CH["ğŸ¤– ã‚­ãƒ£ãƒ©"] --> HCH["ğŸ‘¤"] --> W["ğŸ¤– ä¸–ç•Œè¦³"] --> HW["ğŸ‘¤"] --> T["ğŸ¤– ã‚¿ã‚¹ã‚¯åˆ†è§£"] --> HT["ğŸ‘¤"]

    HT --> Phase2["ãƒ•ã‚§ãƒ¼ã‚º2ã¸"]
```

### ãƒ•ã‚§ãƒ¼ã‚º2: é–‹ç™ºï¼ˆLeaderçµ±æ‹¬ + ä¸¦åˆ—å®Ÿè¡Œï¼‰

```mermaid
flowchart TB
    subgraph Development["ãƒ•ã‚§ãƒ¼ã‚º2: é–‹ç™º"]
        CL["ğŸ–ï¸ Code Leader"] --> HCL["ğŸ‘¤ è¨ˆç”»æ‰¿èª"]
        AL["ğŸ–ï¸ Asset Leader"] --> HAL["ğŸ‘¤ è¨ˆç”»æ‰¿èª"]

        subgraph CodeWork["ã‚³ãƒ¼ãƒ‰é–‹ç™ºï¼ˆä¸¦åˆ—ï¼‰"]
            C1["ğŸ¤– GameLoop"] --> HC1["ğŸ‘¤"]
            C2["ğŸ¤– State"] --> HC2["ğŸ‘¤"]
            C3["ğŸ¤– UI"] --> HC3["ğŸ‘¤"]
        end

        subgraph AssetWork["ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œï¼ˆä¸¦åˆ—ï¼‰"]
            A1["ğŸ¤– ç”»åƒ"] --> HA1["ğŸ‘¤"]
            A2["ğŸ¤– éŸ³å£°"] --> HA2["ğŸ‘¤"]
        end

        HCL --> CodeWork
        HAL --> AssetWork

        CodeWork --> Integration["çµ±åˆ"]
        AssetWork --> Integration
        Integration --> HInt["ğŸ‘¤ çµ±åˆç¢ºèª"]
    end
```

### ãƒ•ã‚§ãƒ¼ã‚º3: å“è³ªï¼ˆé †æ¬¡å®Ÿè¡Œï¼‰

```mermaid
flowchart LR
    I["ğŸ¤– çµ±åˆ"] --> T["ğŸ¤– ãƒ†ã‚¹ãƒˆ"] --> HT["ğŸ‘¤ ãƒ†ã‚¹ãƒˆçµæœç¢ºèª"] --> R["ğŸ¤– ãƒ¬ãƒ“ãƒ¥ãƒ¼"] --> HR["ğŸ‘¤ æœ€çµ‚æ‰¿èª"]

    HR -->|"æ‰¿èª"| Done["ğŸ® ãƒªãƒªãƒ¼ã‚¹"]
    HR -->|"ä¿®æ­£"| Back["ãƒ•ã‚§ãƒ¼ã‚º2ã¸æˆ»ã‚‹"]
```

---

## Agentè©³ç´°ä»•æ§˜

### ç°¡æ˜“ç‰ˆï¼ˆæ¦‚è¦ä¸€è¦§ï¼‰

#### ãƒ•ã‚§ãƒ¼ã‚º1: ä¼ç”»å±¤ï¼ˆ6 Agentï¼‰

| Agent | å…¥åŠ› | å‡ºåŠ› | Humanç¢ºèªãƒã‚¤ãƒ³ãƒˆ |
|-------|-----|------|-----------------|
| **ä¼ç”»** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¤ãƒ‡ã‚¢ | ã‚²ãƒ¼ãƒ ã‚³ãƒ³ã‚»ãƒ—ãƒˆæ–‡æ›¸ | æ–¹å‘æ€§ã®æ‰¿èª |
| **è¨­è¨ˆ** | ã‚³ãƒ³ã‚»ãƒ—ãƒˆ | æŠ€è¡“è¨­è¨ˆæ›¸ | ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ‰¿èª |
| **ã‚·ãƒŠãƒªã‚ª** | ã‚³ãƒ³ã‚»ãƒ—ãƒˆ+è¨­è¨ˆ | ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ¦‚è¦ | ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ‰¿èª |
| **ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼** | ã‚·ãƒŠãƒªã‚ª | ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä»•æ§˜ | ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼æ‰¿èª |
| **ä¸–ç•Œè¦³** | ã‚·ãƒŠãƒªã‚ª | ãƒ¯ãƒ¼ãƒ«ãƒ‰/ãƒ¬ãƒ™ãƒ«è¨­è¨ˆ | ä¸–ç•Œè¦³æ‰¿èª |
| **ã‚¿ã‚¹ã‚¯åˆ†è§£** | ä¸Šè¨˜å…¨ã¦ | ã‚¿ã‚¹ã‚¯ä¸€è¦§+ä¾å­˜é–¢ä¿‚ | ã‚¿ã‚¹ã‚¯è¨ˆç”»æ‰¿èª |

#### ãƒ•ã‚§ãƒ¼ã‚º2: é–‹ç™ºå±¤

| Agent | ç¨®åˆ¥ | è²¬å‹™ |
|-------|-----|------|
| **Code Leader** | Leader | ã‚³ãƒ¼ãƒ‰ã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ»çµ±åˆãƒ»å“è³ªç¢ºèª |
| **Asset Leader** | Leader | ã‚¢ã‚»ãƒƒãƒˆã‚¿ã‚¹ã‚¯ç®¡ç†ãƒ»ç´å“ãƒ»ä»•æ§˜ç®¡ç† |
| **GameLoop** | Code | ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—ã€ãƒ•ãƒ¬ãƒ¼ãƒ ç®¡ç† |
| **StateManager** | Code | ã‚²ãƒ¼ãƒ çŠ¶æ…‹ã€é·ç§»ç®¡ç† |
| **EventSystem** | Code | ã‚¤ãƒ™ãƒ³ãƒˆã®ç™ºè¡Œ/è³¼èª­ |
| **PlayerController** | Code | ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ“ä½œ |
| **UIManager** | Code | UIè¡¨ç¤ºã€æ“ä½œ |
| **DialogSystem** | Code | ä¼šè©±ã‚·ã‚¹ãƒ†ãƒ  |
| **AudioManager** | Code | BGM/SEå†ç”Ÿ |
| **SaveLoadManager** | Code | ã‚»ãƒ¼ãƒ–/ãƒ­ãƒ¼ãƒ‰ |
| **CharacterImage** | Asset | ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒç”Ÿæˆ |
| **BackgroundImage** | Asset | èƒŒæ™¯ç”»åƒç”Ÿæˆ |
| **UIImage** | Asset | UIéƒ¨å“ç”»åƒç”Ÿæˆ |
| **BGMGenerator** | Asset | BGMç”Ÿæˆ |
| **SEGenerator** | Asset | åŠ¹æœéŸ³ç”Ÿæˆ |

#### ãƒ•ã‚§ãƒ¼ã‚º3: å“è³ªå±¤ï¼ˆ3 Agentï¼‰

| Agent | è²¬å‹™ | Humanç¢ºèªãƒã‚¤ãƒ³ãƒˆ |
|-------|-----|-----------------|
| **Integrator** | å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆ | è‡ªå‹•ï¼ˆç¢ºèªãªã—ï¼‰ |
| **Tester** | è‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ | ãƒ†ã‚¹ãƒˆçµæœç¢ºèª |
| **Reviewer** | ã‚³ãƒ¼ãƒ‰å“è³ªç¢ºèª | æœ€çµ‚ãƒªãƒªãƒ¼ã‚¹æ‰¿èª |

---

### è©³ç´°ç‰ˆ

#### ãƒ•ã‚§ãƒ¼ã‚º1: ä¼ç”»å±¤

##### ä¼ç”» Agentï¼ˆConcept Agentï¼‰

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’ã‚²ãƒ¼ãƒ ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«å…·ä½“åŒ–ã™ã‚‹ |
| **å…¥åŠ›** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¤ãƒ‡ã‚¢ï¼ˆè‡ªç„¶è¨€èªï¼‰ |
| **å‡ºåŠ›** | ã‚²ãƒ¼ãƒ ã‚³ãƒ³ã‚»ãƒ—ãƒˆæ–‡æ›¸ï¼ˆJSONï¼‰ |
| **Humanç¢ºèª** | ã‚²ãƒ¼ãƒ ã®æ–¹å‘æ€§ãŒæ­£ã—ã„ã‹ç¢ºèª |

**å‡¦ç†ãƒ•ãƒ­ãƒ¼:**
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’åˆ†æ
2. ã‚²ãƒ¼ãƒ ã‚¸ãƒ£ãƒ³ãƒ«ãƒ»ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå±¤ã‚’ç‰¹å®š
3. ã‚³ã‚¢ãƒ«ãƒ¼ãƒ—ã‚’è¨­è¨ˆ
4. ãƒ¦ãƒ‹ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’æŠ½å‡º
5. ã‚³ãƒ³ã‚»ãƒ—ãƒˆæ–‡æ›¸ã‚’ç”Ÿæˆ

**å‡ºåŠ›ä¾‹:**
```json
{
  "title": "å®‡å®™æ¢ç´¢RPG",
  "genre": "ã‚¢ã‚¯ã‚·ãƒ§ãƒ³RPG",
  "platform": "PC/Web",
  "target_audience": "20-30ä»£ã‚²ãƒ¼ãƒãƒ¼",
  "summary": "æœªçŸ¥ã®æƒ‘æ˜Ÿã‚’æ¢ç´¢ã—ã€è³‡æºã‚’é›†ã‚ã¦å®‡å®™èˆ¹ã‚’å¼·åŒ–ã™ã‚‹RPG",
  "core_loop": ["æ¢ç´¢", "åé›†", "å¼·åŒ–", "æˆ¦é—˜"],
  "unique_points": ["æ‰‹ç¶šãç”Ÿæˆã«ã‚ˆã‚‹ç„¡é™ã®æƒ‘æ˜Ÿ", "ç‰©ç†ãƒ™ãƒ¼ã‚¹ã®å®‡å®™èˆ¹æ“ä½œ"],
  "key_features": ["ã‚ªãƒ¼ãƒ—ãƒ³ãƒ¯ãƒ¼ãƒ«ãƒ‰", "ã‚¯ãƒ©ãƒ•ãƒˆã‚·ã‚¹ãƒ†ãƒ ", "ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤å¯¾å¿œ"]
}
```

##### è¨­è¨ˆ Agentï¼ˆDesign Agentï¼‰

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’æŠ€è¡“çš„ãªè¨­è¨ˆã«è½ã¨ã—è¾¼ã‚€ |
| **å…¥åŠ›** | ã‚²ãƒ¼ãƒ ã‚³ãƒ³ã‚»ãƒ—ãƒˆæ–‡æ›¸ |
| **å‡ºåŠ›** | æŠ€è¡“è¨­è¨ˆæ›¸ï¼ˆJSONï¼‰ |
| **Humanç¢ºèª** | æŠ€è¡“é¸å®šãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒé©åˆ‡ã‹ç¢ºèª |

**å‡¦ç†ãƒ•ãƒ­ãƒ¼:**
1. ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‹ã‚‰æŠ€è¡“è¦ä»¶ã‚’æŠ½å‡º
2. é©åˆ‡ãªæŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã‚’é¸å®š
3. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’è¨­è¨ˆ
4. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²ã‚’æ±ºå®š
5. è¨­è¨ˆæ›¸ã‚’ç”Ÿæˆ

**å‡ºåŠ›ä¾‹:**
```json
{
  "tech_stack": {
    "language": "TypeScript",
    "framework": "Phaser.js",
    "libraries": ["matter.js", "howler.js"]
  },
  "architecture": "ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ™ãƒ¼ã‚¹",
  "components": [
    {"name": "GameCore", "responsibility": "ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ç®¡ç†"},
    {"name": "PlayerSystem", "responsibility": "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ“ä½œãƒ»çŠ¶æ…‹ç®¡ç†"},
    {"name": "WorldGenerator", "responsibility": "æƒ‘æ˜Ÿã®æ‰‹ç¶šãç”Ÿæˆ"},
    {"name": "CombatSystem", "responsibility": "æˆ¦é—˜ãƒ­ã‚¸ãƒƒã‚¯"},
    {"name": "UIManager", "responsibility": "UIè¡¨ç¤ºãƒ»æ“ä½œ"}
  ],
  "data_flow": "ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹"
}
```

##### ã‚·ãƒŠãƒªã‚ª Agentï¼ˆScenario Agentï¼‰

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚²ãƒ¼ãƒ ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒ»ä¸–ç•Œè¨­å®šã‚’ä½œæˆ |
| **å…¥åŠ›** | ã‚³ãƒ³ã‚»ãƒ—ãƒˆ + è¨­è¨ˆ |
| **å‡ºåŠ›** | ã‚·ãƒŠãƒªã‚ªæ–‡æ›¸ï¼ˆJSONï¼‰ |
| **Humanç¢ºèª** | ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã®é­…åŠ›ãƒ»æ•´åˆæ€§ã‚’ç¢ºèª |

**å‡ºåŠ›ä¾‹:**
```json
{
  "setting": {
    "era": "è¥¿æš¦3000å¹´",
    "location": "éŠ€æ²³è¾ºå¢ƒ",
    "situation": "åœ°çƒè³‡æºæ¯æ¸‡ã«ã‚ˆã‚Šå®‡å®™é–‹æ‹“æ™‚ä»£"
  },
  "main_story": {
    "premise": "å¤±ã‚ã‚ŒãŸå¤ä»£æ–‡æ˜ã®éºè·¡ã‚’æ¢ã™æ¢ç´¢è€…ã®ç‰©èª",
    "goal": "å¤ä»£æŠ€è¡“ã‚’ç™ºè¦‹ã—åœ°çƒã‚’æ•‘ã†",
    "conflict": "å®‡å®™æµ·è³Šã¨ã®å¯¾ç«‹"
  },
  "chapters": [
    {"title": "æ—…ç«‹ã¡", "summary": "æ•…éƒ·ã‚’é›¢ã‚Œå®‡å®™ã¸"},
    {"title": "æœ€åˆã®ç™ºè¦‹", "summary": "å¤ä»£éºè·¡ã®æ‰‹ãŒã‹ã‚Šã‚’å¾—ã‚‹"},
    {"title": "å¯¾æ±º", "summary": "å®‡å®™æµ·è³Šã¨ã®æ±ºæˆ¦"}
  ]
}
```

##### ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ Agentï¼ˆCharacter Agentï¼‰

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚²ãƒ¼ãƒ ã«ç™»å ´ã™ã‚‹ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’è¨­è¨ˆ |
| **å…¥åŠ›** | ã‚·ãƒŠãƒªã‚ªæ–‡æ›¸ |
| **å‡ºåŠ›** | ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä»•æ§˜ï¼ˆJSONï¼‰ |
| **Humanç¢ºèª** | ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®é­…åŠ›ãƒ»ãƒãƒ©ãƒ³ã‚¹ã‚’ç¢ºèª |

**å‡ºåŠ›ä¾‹:**
```json
{
  "characters": [
    {
      "id": "player",
      "name": "ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å‘½åï¼‰",
      "role": "ä¸»äººå…¬",
      "personality": "å¥½å¥‡å¿ƒæ—ºç››ã€æ­£ç¾©æ„ŸãŒå¼·ã„",
      "appearance": {
        "age": 25,
        "gender": "é¸æŠå¯èƒ½",
        "features": "ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆã‚¹ãƒ¼ãƒ„ç€ç”¨"
      },
      "abilities": ["æ“ç¸¦", "å°„æ’ƒ", "ä¿®ç†"]
    },
    {
      "id": "rival",
      "name": "ãƒ¬ã‚¤",
      "role": "ãƒ©ã‚¤ãƒãƒ«/å¾Œã«ä»²é–“",
      "personality": "ã‚¯ãƒ¼ãƒ«ã€åˆç†çš„",
      "backstory": "å…ƒè»äººã€éå»ã«å®¶æ—ã‚’å¤±ã†"
    }
  ]
}
```

##### ä¸–ç•Œè¦³ Agentï¼ˆWorld Agentï¼‰

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚²ãƒ¼ãƒ ä¸–ç•Œãƒ»ãƒ¬ãƒ™ãƒ«ã‚’è¨­è¨ˆ |
| **å…¥åŠ›** | ã‚·ãƒŠãƒªã‚ªæ–‡æ›¸ |
| **å‡ºåŠ›** | ä¸–ç•Œè¦³è¨­è¨ˆæ›¸ï¼ˆJSONï¼‰ |
| **Humanç¢ºèª** | ä¸–ç•Œã®åºƒãŒã‚Šãƒ»ä¸€è²«æ€§ã‚’ç¢ºèª |

**å‡ºåŠ›ä¾‹:**
```json
{
  "worlds": [
    {
      "id": "home_planet",
      "name": "ãƒã‚ªã‚¢ãƒ¼ã‚¹",
      "type": "éƒ½å¸‚æƒ‘æ˜Ÿ",
      "description": "äººé¡ã®å±…ä½åœ°ã€è¿‘ä»£çš„ãªéƒ½å¸‚",
      "features": ["å®‡å®™æ¸¯", "ãƒãƒ¼ã‚±ãƒƒãƒˆ", "ä¿®ç†å·¥å ´"]
    },
    {
      "id": "desert_planet",
      "name": "ã‚µãƒ³ãƒ‰ãƒªã‚¢",
      "type": "ç ‚æ¼ æƒ‘æ˜Ÿ",
      "description": "å¤ä»£éºè·¡ãŒçœ ã‚‹ç ‚ã®æƒ‘æ˜Ÿ",
      "hazards": ["ç ‚åµ", "é«˜æ¸©"],
      "resources": ["ãƒ¬ã‚¢ãƒ¡ã‚¿ãƒ«", "å¤ä»£æŠ€è¡“"]
    }
  ],
  "level_progression": ["ãƒã‚ªã‚¢ãƒ¼ã‚¹ â†’ ã‚µãƒ³ãƒ‰ãƒªã‚¢ â†’ ..."]
}
```

##### ã‚¿ã‚¹ã‚¯åˆ†è§£ Agentï¼ˆTaskSplit Agentï¼‰

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ä¼ç”»ãƒ»è¨­è¨ˆã‚’é–‹ç™ºã‚¿ã‚¹ã‚¯ã«åˆ†è§£ |
| **å…¥åŠ›** | å…¨ä¼ç”»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |
| **å‡ºåŠ›** | ã‚¿ã‚¹ã‚¯ä¸€è¦§ + ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—ï¼ˆJSONï¼‰ |
| **Humanç¢ºèª** | ã‚¿ã‚¹ã‚¯ç²’åº¦ãƒ»å„ªå…ˆé †ä½ã‚’ç¢ºèª |

**å‡ºåŠ›ä¾‹:**
```json
{
  "iteration": 1,
  "iteration_goal": "ã‚³ã‚¢ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—å®Ÿè£…",
  "code_tasks": [
    {
      "id": "code_001",
      "name": "GameLoopå®Ÿè£…",
      "priority": 1,
      "estimated_complexity": "medium",
      "depends_on": [],
      "required_assets": []
    }
  ],
  "asset_tasks": [
    {
      "id": "asset_001",
      "name": "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”»åƒ",
      "type": "image",
      "priority": 1,
      "specs": {"format": "PNG", "size": "64x64"}
    }
  ],
  "dependencies": {
    "code_002": ["asset_001"]
  }
}
```

---

#### ãƒ•ã‚§ãƒ¼ã‚º2: é–‹ç™ºå±¤

##### Code Leader Agent

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚³ãƒ¼ãƒ‰é–‹ç™ºå…¨ä½“ã‚’çµ±æ‹¬ |
| **å…¥åŠ›** | ã‚¿ã‚¹ã‚¯ä¸€è¦§ã€ã‚¢ã‚»ãƒƒãƒˆç´å“æƒ…å ± |
| **å‡ºåŠ›** | é–‹ç™ºè¨ˆç”»ã€çµ±åˆã‚³ãƒ¼ãƒ‰ |
| **Humanç¢ºèª** | é–‹ç™ºè¨ˆç”»æ‰¿èªã€çµ±åˆç¢ºèª |

**è²¬å‹™è©³ç´°:**
1. **è¨ˆç”»ä½œæˆ**: ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡Œé †åºã‚’æ±ºå®š
2. **å‰²ã‚Šå½“ã¦**: å„Code Agentã«ã‚¿ã‚¹ã‚¯ã‚’é…åˆ†
3. **ä¾å­˜ç®¡ç†**: ã‚¢ã‚»ãƒƒãƒˆå¾…ã¡ã‚¿ã‚¹ã‚¯ã®ç®¡ç†
4. **é€²æ—è¿½è·¡**: å„Agentã®å®Œäº†çŠ¶æ³ã‚’ç›£è¦–
5. **çµ±åˆ**: ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’çµ±åˆ
6. **å“è³ªç¢ºèª**: çµ±åˆå¾Œã®å‹•ä½œç¢ºèª

**å‡ºåŠ›ä¾‹ï¼ˆé–‹ç™ºè¨ˆç”»ï¼‰:**
```json
{
  "phase": "development",
  "iteration": 1,
  "plan": [
    {"order": 1, "task_id": "code_001", "agent": "GameLoopAgent", "status": "ready"},
    {"order": 2, "task_id": "code_002", "agent": "PlayerAgent", "status": "waiting_asset", "waiting_for": ["asset_001"]}
  ],
  "asset_requests": [
    {"asset_id": "asset_001", "requested_at": "2024-01-01T10:00:00Z"}
  ]
}
```

##### Asset Leader Agent

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œå…¨ä½“ã‚’çµ±æ‹¬ |
| **å…¥åŠ›** | ã‚¿ã‚¹ã‚¯ä¸€è¦§ã€Code Leaderã‹ã‚‰ã®è¦æ±‚ |
| **å‡ºåŠ›** | åˆ¶ä½œè¨ˆç”»ã€ç´å“ã‚¢ã‚»ãƒƒãƒˆä¸€è¦§ |
| **Humanç¢ºèª** | åˆ¶ä½œè¨ˆç”»æ‰¿èªã€ç´å“ç¢ºèª |

**è²¬å‹™è©³ç´°:**
1. **è¨ˆç”»ä½œæˆ**: ã‚¢ã‚»ãƒƒãƒˆåˆ¶ä½œã®å„ªå…ˆé †ä½æ±ºå®š
2. **ä»•æ§˜ç®¡ç†**: å„ã‚¢ã‚»ãƒƒãƒˆã®è©³ç´°ä»•æ§˜ã‚’ç®¡ç†
3. **å‰²ã‚Šå½“ã¦**: å„Asset Agentã«ã‚¿ã‚¹ã‚¯ã‚’é…åˆ†
4. **å“è³ªç¢ºèª**: ç”Ÿæˆã•ã‚ŒãŸã‚¢ã‚»ãƒƒãƒˆã®å“è³ªç¢ºèª
5. **ç´å“**: Code Leaderã¸ã®ã‚¢ã‚»ãƒƒãƒˆç´å“

**å‡ºåŠ›ä¾‹ï¼ˆç´å“ãƒªã‚¹ãƒˆï¼‰:**
```json
{
  "deliveries": [
    {
      "asset_id": "asset_001",
      "name": "player.png",
      "path": "/assets/characters/player.png",
      "specs": {"width": 64, "height": 64, "format": "PNG"},
      "delivered_at": "2024-01-01T12:00:00Z",
      "status": "delivered"
    }
  ]
}
```

##### GameLoop Agentï¼ˆCode Agentä¾‹ï¼‰

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚²ãƒ¼ãƒ ã®ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ—ã‚’å®Ÿè£… |
| **å…¥åŠ›** | è¨­è¨ˆæ›¸ã€ã‚¿ã‚¹ã‚¯ä»•æ§˜ |
| **å‡ºåŠ›** | ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ |
| **ä¾å­˜ã‚¢ã‚»ãƒƒãƒˆ** | ãªã— |

**å‡ºåŠ›ä¾‹:**
```json
{
  "file_path": "src/core/game_loop.ts",
  "language": "typescript",
  "code": "// ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—å®Ÿè£…...",
  "exports": ["GameLoop", "startGame", "stopGame"],
  "tests_required": ["test_game_loop_start", "test_game_loop_stop"]
}
```

##### CharacterImage Agentï¼ˆAsset Agentä¾‹ï¼‰

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç”»åƒã‚’ç”Ÿæˆ |
| **å…¥åŠ›** | ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä»•æ§˜ã€ç”»åƒä»•æ§˜ |
| **å‡ºåŠ›** | ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ |
| **ç”Ÿæˆæ–¹æ³•** | DALL-E / Stable Diffusion |

**å‡ºåŠ›ä¾‹:**
```json
{
  "asset_id": "asset_001",
  "type": "image",
  "file_path": "/assets/characters/player.png",
  "metadata": {
    "width": 64,
    "height": 64,
    "format": "PNG",
    "frames": 8,
    "prompt_used": "pixel art character, space pilot, 64x64"
  }
}
```

---

#### ãƒ•ã‚§ãƒ¼ã‚º3: å“è³ªå±¤

##### Integrator Agent

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | å…¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆ |
| **å…¥åŠ›** | å…¨ã‚³ãƒ¼ãƒ‰å‡ºåŠ›ã€å…¨ã‚¢ã‚»ãƒƒãƒˆ |
| **å‡ºåŠ›** | çµ±åˆæ¸ˆã¿ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| **Humanç¢ºèª** | ãªã—ï¼ˆè‡ªå‹•ï¼‰ |

**å‡¦ç†ãƒ•ãƒ­ãƒ¼:**
1. å…¨ã‚³ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åé›†
2. ä¾å­˜é–¢ä¿‚ã‚’è§£æ±º
3. ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
4. ã‚¢ã‚»ãƒƒãƒˆã‚’é…ç½®
5. çµ±åˆçµæœã‚’å ±å‘Š

##### Tester Agent

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ |
| **å…¥åŠ›** | çµ±åˆæ¸ˆã¿ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ |
| **å‡ºåŠ›** | ãƒ†ã‚¹ãƒˆçµæœãƒ¬ãƒãƒ¼ãƒˆ |
| **Humanç¢ºèª** | ãƒ†ã‚¹ãƒˆçµæœã®ç¢ºèª |

**å‡ºåŠ›ä¾‹:**
```json
{
  "summary": {
    "total": 50,
    "passed": 48,
    "failed": 2,
    "skipped": 0
  },
  "failures": [
    {
      "test": "test_player_collision",
      "error": "AssertionError: expected true, got false",
      "file": "tests/player.test.ts",
      "line": 42
    }
  ],
  "coverage": {
    "statements": 85,
    "branches": 78,
    "functions": 90
  }
}
```

##### Reviewer Agent

| é …ç›® | å†…å®¹ |
|-----|------|
| **å½¹å‰²** | ã‚³ãƒ¼ãƒ‰å“è³ªã‚’ç¢ºèª |
| **å…¥åŠ›** | çµ±åˆæ¸ˆã¿ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€ãƒ†ã‚¹ãƒˆçµæœ |
| **å‡ºåŠ›** | ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆ |
| **Humanç¢ºèª** | æœ€çµ‚ãƒªãƒªãƒ¼ã‚¹æ‰¿èª |

**å‡ºåŠ›ä¾‹:**
```json
{
  "overall_status": "approval_recommended",
  "score": 85,
  "findings": [
    {
      "severity": "warning",
      "category": "performance",
      "file": "src/world/generator.ts",
      "message": "ãƒ«ãƒ¼ãƒ—å†…ã§é‡ã„å‡¦ç†ã€‚æœ€é©åŒ–ã‚’æ¨å¥¨"
    }
  ],
  "checklist": {
    "tests_passing": true,
    "no_critical_bugs": true,
    "code_style_ok": true,
    "documentation_ok": false
  },
  "recommendation": "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¿½åŠ å¾Œã€ãƒªãƒªãƒ¼ã‚¹å¯èƒ½"
}
```

---

## Orchestratorè©³ç´°

```mermaid
flowchart TB
    subgraph Orchestrator["ğŸ¯ Orchestrator"]
        SM["çŠ¶æ…‹ç®¡ç†<br/>ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚º/ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¿½è·¡"]
        RT["ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°<br/>æ¬¡ã®Agentã‚’æ±ºå®š"]
        HC["Humanåˆ¶å¾¡<br/>interrupt/resumeå‡¦ç†"]
        IT["ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†<br/>ã‚µã‚¤ã‚¯ãƒ«é€²è¡Œç®¡ç†"]
        ER["ã‚¨ãƒ©ãƒ¼å‡¦ç†<br/>ãƒªãƒˆãƒ©ã‚¤/ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³"]
    end

    SM --> RT
    RT --> HC
    HC --> IT
    IT --> ER
    ER --> SM
```

### Orchestratorã®è²¬å‹™

1. **çŠ¶æ…‹ç®¡ç†**
   - ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆä¼ç”»/é–‹ç™º/å“è³ªï¼‰
   - ç¾åœ¨ã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç•ªå·
   - å®Œäº†ã‚¿ã‚¹ã‚¯ã€ä¿ç•™ã‚¿ã‚¹ã‚¯

2. **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**
   - ãƒ•ã‚§ãƒ¼ã‚º1ãƒ»3: é †æ¬¡å®Ÿè¡Œ
   - ãƒ•ã‚§ãƒ¼ã‚º2: LeaderçµŒç”±ã§ä¸¦åˆ—å®Ÿè¡Œ
   - Humanãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã«å¿œã˜ãŸæ¡ä»¶åˆ†å²

3. **ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†**
   - ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç›®æ¨™ã®è¨­å®š
   - ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†åˆ¤å®š
   - æ¬¡ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¸ã®é·ç§»

4. **Humané€£æº**
   - å„æ‰¿èªãƒã‚¤ãƒ³ãƒˆã§`interrupt()`
   - çŠ¶æ…‹ã‚’æ°¸ç¶šåŒ–ï¼ˆæ•°ãƒ¶æœˆå¾Œã§ã‚‚å†é–‹å¯èƒ½ï¼‰
   - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é©åˆ‡ãªAgentã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

5. **ã‚¨ãƒ©ãƒ¼å‡¦ç†**
   - LLMå‘¼ã³å‡ºã—å¤±æ•—æ™‚ã®ãƒªãƒˆãƒ©ã‚¤
   - ç¹°ã‚Šè¿”ã—å¤±æ•—æ™‚ã®Humanã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
   - å¿…è¦ã«å¿œã˜ã¦ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆã¸ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯

---

## Humané€£æºãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant O as Orchestrator
    participant L as Leader
    participant A as Agent
    participant H as Human

    O->>L: ã‚¿ã‚¹ã‚¯å®Ÿè¡ŒæŒ‡ç¤º
    L->>A: ã‚µãƒ–ã‚¿ã‚¹ã‚¯å‰²å½“
    A->>A: å®Ÿè¡Œ
    A->>L: çµæœè¿”å´
    L->>L: çµ±åˆãƒ»ç¢ºèª
    L->>O: å®Œäº†å ±å‘Š
    O->>O: interrupt()
    O->>H: æˆæœç‰©ã‚’æç¤º

    loop æ‰¿èªã¾ã§
        H->>O: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆæ‰¿èª/ä¿®æ­£æŒ‡ç¤ºï¼‰
        alt ä¿®æ­£æŒ‡ç¤ºã®å ´åˆ
            O->>L: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è»¢é€
            L->>A: ä¿®æ­£æŒ‡ç¤º
            A->>A: ä¿®æ­£
            A->>L: ä¿®æ­£ç‰ˆè¿”å´
            L->>O: ä¿®æ­£å®Œäº†
            O->>H: ä¿®æ­£ç‰ˆã‚’æç¤º
        end
    end

    H->>O: æ‰¿èª
    O->>O: æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸
```

---

## çŠ¶æ…‹ã‚¹ã‚­ãƒ¼ãƒ

```python
from typing import TypedDict, Literal, Optional

class Task(TypedDict):
    id: str
    name: str
    status: Literal["pending", "in_progress", "completed", "blocked"]
    assigned_to: Optional[str]
    depends_on: list[str]
    required_assets: list[str]

class Iteration(TypedDict):
    number: int
    goal: str
    code_tasks: list[Task]
    asset_tasks: list[Task]
    status: Literal["planning", "development", "quality", "completed"]

class GameDevState(TypedDict):
    # ã‚¹ã‚­ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³
    _schema_version: str

    # ç¾åœ¨ä½ç½®
    current_phase: Literal["planning", "development", "quality"]
    current_iteration: int

    # ä¼ç”»å‡ºåŠ›
    concept: Optional[dict]
    design: Optional[dict]
    scenario: Optional[dict]
    characters: Optional[list[dict]]
    world: Optional[dict]

    # ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†
    iterations: list[Iteration]

    # é–‹ç™ºå‡ºåŠ›
    code_outputs: dict[str, str]      # task_id -> code
    asset_outputs: dict[str, str]     # task_id -> asset_path

    # ä¾å­˜é–¢ä¿‚
    asset_code_dependencies: list[dict]

    # å“è³ªå‡ºåŠ›
    test_results: Optional[dict]
    review_comments: Optional[list[str]]

    # Humané€£æº
    pending_approval: Optional[str]
    human_feedback: Optional[str]

    # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
    error_log: list[str]
```

---

## ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º

> âš ï¸ ã“ã‚Œã¯**ã“ã®ã‚·ã‚¹ãƒ†ãƒ è‡ªä½“**ã®é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã§ã™ã€‚ã‚²ãƒ¼ãƒ é–‹ç™ºã®ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã¯åˆ¥ã§ã™ã€‚

### MVPï¼ˆæœ€å°å®Ÿè¡Œå¯èƒ½è£½å“ï¼‰
- [ ] Orchestratorï¼ˆåŸºæœ¬ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰
- [ ] ä¼ç”» + è¨­è¨ˆ Agent
- [ ] å˜ä¸€Coder Agentï¼ˆçµ±åˆç‰ˆï¼‰
- [ ] 3ç®‡æ‰€ã®Humanæ‰¿èª

### v1.0
- [ ] ä¼ç”»å±¤ã®å…¨Agentï¼ˆ6å€‹ï¼‰
- [ ] Code Leader + Asset Leader
- [ ] ä¸¦åˆ—é–‹ç™ºã®ä»•çµ„ã¿
- [ ] ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†

### v2.0
- [ ] ã‚¢ã‚»ãƒƒãƒˆç”Ÿæˆé€£æºï¼ˆDALL-Eç­‰ï¼‰
- [ ] ã‚²ãƒ¼ãƒ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå¯¾å¿œ
- [ ] Humanç¢ºèªç”¨WebUI

---

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | æŠ€è¡“ |
|--------------|------|
| **ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** | LangGraph |
| **LLM** | Claude / GPT-4 |
| **è¨€èª** | Python 3.11+ |
| **çŠ¶æ…‹ä¿å­˜** | SQLite / PostgreSQL |
| **ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³** | æœªå®šï¼ˆPhaser.js / Pygameç­‰ï¼‰ |
| **ç”»åƒç”Ÿæˆ** | DALL-E / Stable Diffusion |
| **éŸ³å£°ç”Ÿæˆ** | Suno / ElevenLabs |
